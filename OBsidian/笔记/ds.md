

# 1.ä¼˜é›…çš„åºåˆ— - å‰ç¼€å’Œ

### å‰ç¼€å’Œ

ç”¨äºå¤šæ¬¡æŸ¥è¯¢æŸä¸ªåŒºé—´å†…çš„å€¼ã€‚

 ä¸€èˆ¬æˆ‘ä»¬æœ‰nä¸ªæ•°è¿›è¡Œè®¡ç®—ï¼Œé‚£æˆ‘ä»¬å°±å¼€ä¸€ä¸ªn+1å¤§å°çš„æ•°ç»„ï¼Œ0ä½æ”¾å•ä½å…ƒï¼Œç¬¬ i ä½ä¸º $[1 - i]$ ä¸ªæ•°åšè§„å®šè¿ç®—çš„ç»“æœã€‚

```cpp
vector<int> prefix_sum(n+1, å•ä½å…ƒ);
for (int i = 1; i <= n; ++i)
    prefix_sum[i] = prefix_sum[i-1] è¿ç®— arr[i-1];
```

> **0ä½æ”¾å•ä½å…ƒ**
>
> â€‹	1ä¸ä»»ä½•æ•°ç›¸ä¹˜å¾—åˆ°è¯¥æ•°ï¼Œ0ä¸ä»»ä½•æ•°ç›¸åŠ å¾—åˆ°è¯¥æ•°ï¼›ä¹Ÿå°±æ˜¯æˆ‘ä»¬å–çš„æ˜¯è¿™ä¸ªä»£æ•°ç³»ç»Ÿçš„**å•ä½å…ƒ**ï¼Œå…¶ä¸ä»»ä½•æ•°ä½œè§„å®šè¿ç®—å¾—åˆ°è¿™ä¸ªæ•°æœ¬èº«ï¼Œä¿è¯å®ƒä¸ä¼šå¯¹æ¥ä¸‹æ¥çš„è¿ç®—äº§ç”Ÿå½±å“ã€‚å¯¹äºä»£æ•°ç³»ç»Ÿ<{0,1},$\oplus $>ï¼Œå•ä½å…ƒä¸º0ã€‚

| å‰ç¼€è®¡ç®—ç¬¦å·    | 0ä½å¡«å…… | åŒºé—´ $[aï¼Œb]$            |
| --------- | ---- | --------------------- |
| $\times $ | 1    | $S(b) \div S(a-1)$    |
| $+$       | 0    | $S(b) - S(a-1)$       |
| $\oplus $ | 0    | $S[b] \oplus S[a-1] $ |

è®°ä½å°±è¡Œ


> **å¼‚æˆ–å’Œå‰ç¼€è®¡ç®—åŒºé—´è¯æ˜**
> 
>$$
>\begin{aligned} S[b] \oplus S[a-1] &= \left( \bigoplus_{i=0}^{b-1} \text{arr}[i] \right) \oplus \left( \bigoplus_{i=0}^{a-2} \text{arr}[i] \right) = \bigoplus_{i=0}^{a-2} (\text{arr}[i] \oplus \text{arr}[i]) \oplus \bigoplus_{i=a-1}^{b-1} \text{arr}[i] = \bigoplus_{i=0}^{a-2} 0 \oplus \bigoplus_{i=a-1}^{b-1} \text{arr}[i] = \bigoplus_{i=a-1}^{b-1} \text{arr}[i]. \end{aligned}
>$$

### ä»£ç 


```cpp
#include <iostream>
#include <vector>
#include <cstdio>
using namespace std;

int main()
{
  int n, m;
  cin >> n >> m;
  vector<int> arr(n);
  for (int i = 0; i < n; ++i)
    cin >> arr[i];
  //å‰ç¼€å¼‚æˆ–å’Œã€‚
  //åˆå§‹åŒ–ä¸º0æ˜¯å› ä¸º0ä¸ä»»ä½•æ•°å¼‚æˆ–ç»“æœä¸ºè¯¥æ•°æœ¬èº«ã€‚
  vector<int> prefix_sum(n+1, 0);
  for (int i = 1; i <= n; ++i)
    //å¼‚æˆ–å’Œ
    prefix_sum[i] = prefix_sum[i-1] ^ arr[i-1];
  for (int i = 0; i < m; ++i)
  {
    int a, b;
    cin >> a >> b;
    if (a == b) printf("%d\n",arr[a-1]);
    else
    {
      int result = prefix_sum[b] ^ prefix_sum[a-1];
      printf("%d\n", result);
    }
  }
}
```

# 2.å“¥å¾·å·´èµ«çŒœæƒ³é—®é¢˜ - ç´ æ•°ç­›

### ç­›çŸ¥è¯†è¡¥

ä¸ºä»€ä¹ˆæ ‡è®°åˆ°æœ€å¤§ä¸ºnçš„ç´ æ•°æ—¶åªè¦å¾ªç¯åˆ°å°äºç­‰äº $\sqrt{n}$ï¼Ÿ

ç®€å•æ¥è¯´ï¼Œå¤–å±‚å¾ªç¯åªéœ€è¦åˆ° $\sqrt{n}$ï¼Œæ˜¯å› ä¸º**åˆæ•°çš„å› å­æ˜¯æˆå¯¹å‡ºç°çš„**ã€‚

æˆ‘ç”¨æœ€ç›´è§‚çš„æ–¹å¼ç»™ä½ è§£é‡Šï¼š

#### 1. å› å­çš„â€œè··è··æ¿â€åŸç†

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåˆæ•° $C$ï¼ˆæ¯”å¦‚ $C = 36$ï¼‰ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒæ‹†æˆä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜ $a \times b = 36$ã€‚

æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›â€œå› å­å¯¹â€ï¼š

- $1 \times 36$
- $2 \times 18$
- $3 \times 12$
- $4 \times 9$
- $6 \times 6$  <-- **æ³¨æ„è¿™é‡Œï¼Œè¿™æ˜¯ä¸­å¿ƒç‚¹ ($\sqrt{36}$)**
- $9 \times 4$  <-- é‡å¤äº†ï¼ˆå’Œ $4 \times 9$ ä¸€æ ·ï¼‰
- $12 \times 3$ <-- é‡å¤äº†
- ...

ç»“è®ºï¼š

å¦‚æœä¸çœ‹ $1$ å’Œå®ƒæœ¬èº«ï¼š

åªè¦ $C$ æ˜¯åˆæ•°ï¼Œå®ƒå¿…å®šå¯ä»¥å†™æˆ $a \times b$ çš„å½¢å¼ã€‚

å¦‚æœ $a$ å¤§äº $\sqrt{C}$ï¼Œé‚£ä¹ˆ $b$ å¿…å®šå°äº $\sqrt{C}$ã€‚

è¿™ä¸¤ä¸ªå› å­ä¸­ï¼Œå¿…å®šæœ‰ä¸€ä¸ªæ˜¯â€œå°å› å­â€ï¼ˆå°äºç­‰äº $\sqrt{C}$ï¼‰ã€‚

#### 2. å›åˆ°â€œç­›æ³•â€çš„é€»è¾‘

åŸƒæ°ç­›æ³•çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šâ€œ**åªè¦æˆ‘èƒ½æ‰¾åˆ°ä¸€ä¸ªåˆæ•°çš„ä»»æ„ä¸€ä¸ªå› å­ï¼Œæˆ‘å°±èƒ½æŠŠå®ƒæ ‡è®°ä¸ºåˆæ•°ï¼ˆç­›æ‰ï¼‰ã€‚**â€

å¯¹äº $N$ ä»¥å†…çš„ä»»æ„ä¸€ä¸ªåˆæ•° $X$ï¼š

- å®ƒä¸€å®šæœ‰ä¸€ä¸ªå°äºç­‰äº $\sqrt{X}$ çš„å› å­ã€‚
- å› ä¸º $X \le N$ï¼Œæ‰€ä»¥ $\sqrt{X} \le \sqrt{N}$ã€‚
- **æ¨è®º**ï¼š$N$ ä»¥å†…æ‰€æœ‰çš„åˆæ•°ï¼Œéƒ½è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªå°äºç­‰äº $\sqrt{N}$ çš„å› å­ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦è®©å¤–å±‚å¾ªç¯ï¼ˆå……å½“â€œå› å­â€çš„è§’è‰²ï¼‰éå†åˆ° $\sqrt{N}$ã€‚åªè¦æŠŠ $\sqrt{N}$ ä»¥å†…çš„æ•°çš„å€æ•°éƒ½ç­›æ‰ï¼Œç”±äºæ‰€æœ‰åˆæ•°éƒ½æœ‰â€œå°å› å­â€ï¼Œå®ƒä»¬å°±ä¸€å®šä¼šè¢«ç­›æ‰ï¼Œ**ä¸€ä¸ªéƒ½ä¸ä¼šæ¼**ã€‚

#### 3. ä¸¾ä¸ªåä¾‹ï¼šä¸ºä»€ä¹ˆè¦éå†å¤§äº $\sqrt{n}$ çš„æ•°ï¼Ÿ

å‡è®¾ $n = 100$ï¼Œ$\sqrt{n} = 10$ã€‚

å¦‚æœä½ éè¦è®©å¤–å±‚å¾ªç¯ç»§ç»­èµ°åˆ° ind = 11ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

- ä½ è¿›å…¥å¾ªç¯ï¼Œå‡†å¤‡ç­›æ‰ 11 çš„å€æ•°ã€‚
- **11 çš„ 2 å€ (22)**ï¼šå·²ç»è¢« `ind=2` ç­›è¿‡äº†ã€‚
- **11 çš„ 3 å€ (33)**ï¼šå·²ç»è¢« `ind=3` ç­›è¿‡äº†ã€‚
- ...
- **11 çš„ 10 å€ (110)**ï¼šå·²ç»è¢« `ind=10`ï¼ˆæˆ–è€…2æˆ–5ï¼‰ç­›è¿‡äº†ã€‚
- **11 çš„ 11 å€ (121)**ï¼š**è¿™å°±å·²ç»è¶…è¿‡ $n$ (100) äº†ï¼**

å‘ç°äº†å—ï¼Ÿ

å½“ä½ éå†åˆ°ä¸€ä¸ªå¤§äº $\sqrt{n}$ çš„æ•°ï¼ˆæ¯”å¦‚ 11ï¼‰æ—¶ï¼š

1. å®ƒå’Œ**æ¯”å®ƒå°**çš„æ•°çš„ä¹˜ç§¯ï¼Œæ—©å°±è¢«é‚£ä¸ªå°æ•°ç­›è¿‡äº†ã€‚
2. å®ƒå’Œ**å®ƒè‡ªå·±**ï¼ˆæˆ–æ¯”å®ƒå¤§ï¼‰çš„æ•°çš„ä¹˜ç§¯ï¼Œå·²ç»**è¶…è¿‡äº† $n$ çš„èŒƒå›´**ï¼Œæ ¹æœ¬ä¸éœ€è¦ä½ å¤„ç†ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤–å±‚å¾ªç¯èµ°åˆ° $\sqrt{n}$ å°±å®Œå…¨è¶³å¤Ÿäº†ï¼Œå†å¾€åèµ°çº¯å±æµªè´¹æ—¶é—´ï¼Œå› ä¸ºå®ƒæ‰¾ä¸åˆ°ä»»ä½•**æ–°çš„ã€èŒƒå›´å†…**çš„åˆæ•°æ¥æ ‡è®°ã€‚

### ä»£ç 


```cpp
#include <iostream>
#include <vector>
#include <cstdio>
#include <cmath>
using namespace std;

int main()
{
  int n;
  cin>>n;

  vector<bool> arr(n+5, 0);
  int ind = 2;
  // ç´ æ•°å¿…å®šå°äºç­‰äºsqrt(n)
  while (ind <= sqrt(n))
  {
    if(arr[ind]==0)
    {
      //å†…å±‚å¾ªç¯ç”¨äºå°†ç´ æ•°çš„å€æ•°æ ‡è®°ä¸ºåˆæ•°ï¼Œå¿…é¡»æ ‡è®°åˆ°nï¼Œå› ä¸ºã€2ï¼Œsqrtï¼ˆnï¼‰ã€‘çš„å› å­æ˜¯å¯ä»¥åˆ¤æ–­åˆ°ã€3ï¼Œnã€‘çš„æ•°æ˜¯å¦æ˜¯ç´ æ•°çš„
      //ä»ind*indå¼€å§‹æ ‡è®°ï¼Œå› ä¸ºå°äºind*indçš„å€æ•°ï¼Œå·²ç»è¢«æ›´å°çš„ç´ æ•°æ ‡è®°è¿‡äº†
      for(int j=ind*ind;j<=n;j+=ind)
        arr[j]=1;
    }
    ind++;
  }

  int count = 0;
  int i = 2;
  // åªéœ€éå†åˆ°n/2ï¼Œå› ä¸ºiå’Œn-iæ˜¯å¯¹ç§°çš„
  // å¯¹äºn/2ä¸ºå¶æ•°çš„æƒ…å†µï¼Œåˆšå¥½ç®—ä¸€æ¬¡i=n/2
  while(i<=n/2)
  {
    if(arr[i]==0 && arr[n-i]==0)
      count++;
    i++;
  }

  cout<<count<<endl;
  return 0;
}
```

# 3.äºšå…‹æ˜Ÿä¸Šçš„å†›é˜Ÿ - ç»“æ„çš„è¿ç”¨ -List

### Deque

å¯ä»¥ç´¢å¼•

C++ STL ä¸­çš„ `std::deque`ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼ŒDouble-Ended Queueï¼‰æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„å®¹å™¨ã€‚å®ƒåœ¨é€»è¾‘ä¸Šè¡¨ç°ä¸ºè¿ç»­å†…å­˜ï¼Œä½†ç‰©ç†å®ç°ä¸Šæ˜¯ç”±ä¸€æ®µæ®µè¿ç»­çš„å›ºå®šå¤§å°åŒºå—ï¼ˆBufferï¼‰é€šè¿‡ä¸€ä¸ªä¸­æ§æ˜ å°„è¡¨ï¼ˆMapï¼‰è¿æ¥è€Œæˆçš„ã€‚

è¿™ç§ç»“æ„ä½¿å¾—å®ƒåœ¨**å¤´å°¾ä¸¤ç«¯**æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡æé«˜ï¼ˆ$O(1)$ï¼‰ï¼Œä¸”æ”¯æŒéšæœºè®¿é—®ã€‚

#### 1. æ ¸å¿ƒå±æ€§ä¸ç‰¹ç‚¹

åœ¨æ·±å…¥æ–¹æ³•ä¹‹å‰ï¼Œç†è§£ `deque` çš„ç‰©ç†ç»“æ„æœ‰åŠ©äºç†è§£å…¶æ€§èƒ½è¡¨ç°ï¼š

- **åŒç«¯æ“ä½œï¼š** åœ¨é˜Ÿå¤´å’Œé˜Ÿå°¾è¿›è¡Œæ’å…¥/åˆ é™¤éƒ½æ˜¯ $O(1)$ã€‚
- **éšæœºè®¿é—®ï¼š** æ”¯æŒ `[]` è¿ç®—ç¬¦å’Œ `at()`ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼ˆè™½ç„¶æ¯” `vector` ç¨æ…¢ï¼Œå› ä¸ºéœ€è¦ä¸¤æ¬¡æŒ‡é’ˆè·³è½¬ï¼‰ã€‚
- **å†…å­˜ä¸è¿ç»­ï¼š** æ•´ä½“å†…å­˜æ˜¯ä¸è¿ç»­çš„ï¼Œå› æ­¤ä¸èƒ½åƒ `vector` é‚£æ ·é€šè¿‡ç®€å•çš„æŒ‡é’ˆåç§»æ¥éå†æ•´ä¸ªå®¹å™¨ã€‚
- **åŠ¨æ€å¢é•¿ï¼š** æ²¡æœ‰ `capacity` å’Œ `reserve` çš„æ¦‚å¿µï¼Œå®ƒä¼šæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…æ–°çš„åŒºå—ã€‚

#### 2. å¸¸ç”¨æˆå‘˜æ–¹æ³•

æˆ‘ä»¬å°†æ–¹æ³•åˆ†ä¸ºå‡ å¤§ç±»ï¼š

##### A. è¿­ä»£å™¨ (Iterators)

ç”¨äºéå†å®¹å™¨ã€‚

- `begin()`, `end()`: æŒ‡å‘å¤´å°¾çš„è¿­ä»£å™¨ã€‚
- `rbegin()`, `rend()`: åå‘è¿­ä»£å™¨ã€‚
- `cbegin()`, `cend()`: å¸¸é‡è¿­ä»£å™¨ï¼ˆC++11ï¼‰ã€‚ ä½ **ä¸èƒ½**ä¿®æ”¹å®ƒæ‰€æŒ‡å‘çš„å†…å®¹ã€‚ 

##### B. å®¹é‡ç›¸å…³ (Capacity)

- `size()`: è¿”å›å½“å‰å…ƒç´ ä¸ªæ•°ã€‚
- `max_size()`: è¿”å›å¯å®¹çº³çš„æœ€å¤§å…ƒç´ æ•°ã€‚
- `empty()`: åˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚
- `shrink_to_fit()`: è¯·æ±‚é‡Šæ”¾æœªä½¿ç”¨çš„å†…å­˜ï¼ˆC++11ï¼‰ã€‚
- `resize(n)`: æ”¹å˜å®¹å™¨å¤§å°ã€‚

##### C. å…ƒç´ è®¿é—® (Element Access)

- `operator[]`: ä¸‹æ ‡è®¿é—®ï¼Œä¸æ£€æŸ¥è¶Šç•Œã€‚ å°±æ˜¯ä¸­æ‹¬å·é‚£ä½ç´¢å¼•ã€‚
- `at(i)`: ä¸‹æ ‡è®¿é—®ï¼Œ**æ£€æŸ¥è¶Šç•Œ**ï¼ˆæŠ›å‡º `std::out_of_range`ï¼‰ã€‚
- `front()`: è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚
- `back()`: è¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚

##### D. ä¿®æ”¹å™¨ (Modifiers)

è¿™æ˜¯ `deque` æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚

| **æ–¹æ³•**           | **åŠŸèƒ½**               | **æ—¶é—´å¤æ‚åº¦** |
| ------------------ | ---------------------- | -------------- |
| **`push_back()`**  | åœ¨å°¾éƒ¨æ·»åŠ å…ƒç´          | $O(1)$         |
| **`push_front()`** | åœ¨å¤´éƒ¨æ·»åŠ å…ƒç´          | $O(1)$         |
| **`pop_back()`**   | åˆ é™¤å°¾éƒ¨å…ƒç´            | $O(1)$         |
| **`pop_front()`**  | åˆ é™¤å¤´éƒ¨å…ƒç´            | $O(1)$         |
| `insert()`         | åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´      | $O(n)$         |
| `erase()`          | åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´        | $O(n)$         |
| `emplace_back()`   | å°¾éƒ¨åŸä½æ„é€ ï¼ˆæ›´é«˜æ•ˆï¼‰ | $O(1)$         |
| `emplace_front()`  | å¤´éƒ¨åŸä½æ„é€ ï¼ˆæ›´é«˜æ•ˆï¼‰ | $O(1)$         |
| `clear()`          | æ¸…ç©ºæ‰€æœ‰å…ƒç´            | $O(n)$         |
| `assign()`         | é‡æ–°èµ‹å€¼               | $O(n)$         |

###### emplace?

ç®€å•æ¥è¯´ï¼Œ`emplace` å’Œ `push` çš„åŒºåˆ«åœ¨äºï¼š**ä½ æ˜¯æŠŠâ€œåšå¥½çš„èœâ€ç«¯è¿›å±‹ï¼Œè¿˜æ˜¯æŠŠâ€œé£Ÿæâ€å¸¦è¿›å±‹é‡Œç°åšã€‚**

åœ¨ C++11 ä¹‹å‰ï¼Œå¦‚æœä½ æƒ³å¾€å®¹å™¨é‡Œæ”¾ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œå¿…é¡»å…ˆåœ¨å¤–é¢æŠŠå¯¹è±¡é€ å‡ºæ¥ï¼Œå†æŠŠå®ƒâ€œæ‹·è´â€æˆ–â€œç§»åŠ¨â€è¿›å»ã€‚è€Œ `emplace` å…è®¸ä½ åªä¼ é€’å‚æ•°ï¼Œè®©å®¹å™¨åœ¨å®ƒè‡ªå·±çš„å†…å­˜ç©ºé—´é‡Œç›´æ¥æ„é€ å¯¹è±¡ã€‚

å‡è®¾ä½ æœ‰ä¸€ä¸ªç±» `Student`ï¼š

```cpp
struct Student {
    std::string name;
    int age;
    // æ„é€ å‡½æ•°
    Student(std::string n, int a) : name(n), age(a) {}
};
```

**ä½¿ç”¨ `push_back`ï¼ˆæ¬å®¶æ¨¡å¼ï¼‰ï¼š**

1. **å¤–é¢æ„é€ **ï¼šä½ å…ˆå†™ `Student s("å¼ ä¸‰", 18);`ï¼ˆäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼‰ã€‚
2. **æ¬è¿**ï¼šè°ƒç”¨ `dq.push_back(s);`ã€‚
3. **æ‹·è´/ç§»åŠ¨**ï¼šå®¹å™¨åœ¨è‡ªå·±çš„å†…å­˜é‡Œåˆ›å»ºä¸€ä¸ªæ–°ç©ºé—´ï¼ŒæŠŠ `s` çš„å†…å®¹**å¤åˆ¶**è¿›å»ã€‚
4. **é”€æ¯**ï¼šå¤–é¢çš„ä¸´æ—¶å¯¹è±¡ `s` åŠŸæˆèº«é€€ï¼Œè¢«é”€æ¯ã€‚

**ä½¿ç”¨ `emplace_back`ï¼ˆä¸Šé—¨å®šåˆ¶æ¨¡å¼ï¼‰ï¼š**

1. **åªä¼ å‚æ•°**ï¼šä½ å†™ `dq.emplace_back("å¼ ä¸‰", 18);`ã€‚
2. **åŸåœ°å¼€å·¥**ï¼šå®¹å™¨ç›´æ¥åœ¨å®ƒå†…éƒ¨çš„ç©ºé—²å†…å­˜ä¸Šï¼Œè°ƒç”¨ `Student` çš„æ„é€ å‡½æ•°ã€‚

| æ–¹æ³• | ä¼ é€’çš„å†…å®¹ | å†…éƒ¨åŠ¨ä½œ |
| --- | --- | --- |
| **`push_back(obj)`** | å·²ç»é€ å¥½çš„å¯¹è±¡ | **æ‹·è´æˆ–ç§»åŠ¨**å¯¹è±¡åˆ°å®¹å™¨å†…å­˜ |
| **`emplace_back(args...)`** | æ„é€ å¯¹è±¡æ‰€éœ€çš„**å‚æ•°** | åœ¨å®¹å™¨å†…å­˜ä¸­**ç›´æ¥æ„é€ **å¯¹è±¡ |

**æ ¸å¿ƒé‡ç‚¹**ï¼š`emplace` çš„æ•ˆç‡æ°¸è¿œ**ä¸ä½äº** `push`ã€‚åœ¨å¤„ç†å¤§å‹å¯¹è±¡ï¼ˆæ¯”å¦‚å¸¦æœ‰é•¿å­—ç¬¦ä¸²æˆ–æ•°ç»„çš„ç»“æ„ä½“ï¼‰æ—¶ï¼Œ`emplace` èƒ½æ˜¾è‘—å‡å°‘æ€§èƒ½æŸè€—ã€‚*

#### 3. `vector` vs `deque`ï¼šè¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ

| **ç‰¹æ€§**          | **vector**                   | **deque**                                                |
| ----------------- | ---------------------------- | -------------------------------------------------------- |
| **å¤´éƒ¨æ’å…¥/åˆ é™¤** | $O(n)$ (æ…¢)                  | $O(1)$ (å¿«)                                              |
| **å°¾éƒ¨æ’å…¥/åˆ é™¤** | $O(1)$ (å¿«)                  | $O(1)$ (å¿«)                                              |
| **éšæœºè®¿é—®**      | æå¿«ï¼ˆè¿ç»­å†…å­˜ï¼‰             | å¿«ï¼ˆéœ€è·¨åŒºå—è®¡ç®—ï¼‰                                       |
| **å†…å­˜ç¨³å®šæ€§**    | æ‰©å®¹æ—¶å¯èƒ½å¯¼è‡´æ‰€æœ‰è¿­ä»£å™¨å¤±æ•ˆ | æ’å…¥åˆ é™¤å¯èƒ½å¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œä½†é€šå¸¸æ¯” vector ç¨å¾®å¤æ‚ä¸€äº› |
| **å…¸å‹ç”¨é€”**      | é»˜è®¤é¦–é€‰å®¹å™¨                 | éœ€è¦é¢‘ç¹åœ¨ä¸¤ç«¯æ“ä½œï¼Œå¦‚**ä»»åŠ¡é˜Ÿåˆ—**                       |

#### åˆ é™¤Dequeä¸­æ‰€æœ‰xçš„å…ƒç´ ï¼Ÿ

##### ç®€å•æ–¹æ³•

```cpp
// åˆ é™¤åŒºåŸŸaä¸­æ‰€æœ‰å€¼ä¸ºxçš„å…ƒç´ 
deque<int> temp;
while (!region[a].empty())
{
     int curr = region[a].front();
     region[a].pop_front();
     if (curr != x)
     {
        temp.push_back(curr);
      }
}
region[a] = temp;
```

##### å‡½æ•°æ–¹æ³•

###### åŸç†

```cpp
#include <algorithm> // éœ€è¦å¼•å…¥è¿™ä¸ªå¤´æ–‡ä»¶

// è§£é‡Šï¼š
// remove ä¼šæŠŠæ‰€æœ‰ä¸éœ€è¦åˆ é™¤çš„å…ƒç´ ç§»åˆ°å‰é¢ï¼Œè¿”å›â€œæ–°é€»è¾‘ç»“å°¾â€çš„è¿­ä»£å™¨
// erase è´Ÿè´£çœŸæ­£æŠŠåé¢çš„åƒåœ¾æ•°æ®åˆ‡æ‰
auto it = remove(region[a].begin(), region[a].end(), x);
region[a].erase(it, region[a].end());
```

å®ƒçš„åŸç†å…¶å®éå¸¸æœ‰è¶£ï¼Œå°±åƒ**æ’é˜Ÿè¸¢äºº**ï¼š

å‡è®¾æ•°ç»„æ˜¯ï¼š`[1, 3, 5, 3, 2]`ï¼Œæˆ‘ä»¬è¦åˆ  `3`ã€‚

1. **`remove` ä¸ä¼šçœŸçš„ç¼©å°æ•°ç»„å¤§å°**ï¼Œå®ƒåªæ˜¯æŠŠâ€œä¸è¦åˆ çš„äººâ€å¾€å‰æŒ¤ã€‚
   - å®ƒéå†æ•°ç»„ï¼ŒæŠŠé `3` çš„æ•°ä¸€ä¸ªä¸€ä¸ªå¡«åˆ°å‰é¢å»ã€‚
   - å¡«å®Œåæ•°ç»„å˜æˆï¼š`[1, 5, 2, ?, ?]` (å‰ä¸‰ä¸ªæ˜¯æœ‰æ•ˆæ•°æ®ï¼Œåé¢ä¸¤ä¸ªæ˜¯åºŸå¼ƒæ•°æ®)ã€‚
   - å®ƒè¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ `2` åé¢çš„é‚£ä¸ªä½ç½®ï¼ˆæ–°é€»è¾‘çš„ç»“å°¾ï¼‰ã€‚
2. **`erase` æ‰æ˜¯åˆ½å­æ‰‹**ã€‚
   - å®ƒæ‹¿ç€ `remove` è¿”å›çš„é‚£ä¸ªæŒ‡é’ˆï¼ŒæŠŠåé¢æ‰€æœ‰çš„åºŸå¼ƒæ•°æ®ä¸€åˆ€åˆ‡æ‰ã€‚
   - æ•°ç»„çœŸæ­£å˜æˆï¼š`[1, 5, 2]`ã€‚

**ä¸€å¥è¯æ€»ç»“ï¼š`remove` è´Ÿè´£æŠŠæ´»ç€çš„äººå¾€å‰æŒªï¼Œ`erase` è´Ÿè´£æŠŠåé¢ç©ºå‡ºæ¥çš„åº§ä½ç æ‰ã€‚**

###### å®ƒçš„æå‡å¾ˆå¤§å—ï¼Ÿ

å°±æ˜¯ä¸€ä¸ªåŸåœ°æ“ä½œå’Œé¢å¤–å†…å­˜çš„åŒºåˆ«

##### å¦‚æœâ€œåªåˆ é™¤ç¬¬ä¸€ä¸ªâ€æ€ä¹ˆåŠï¼Ÿ

`std::remove` è¿™ä¸ªå‡½æ•°æ¯”è¾ƒâ€œä¸€æ ¹ç­‹â€ï¼Œå®ƒè®¾è®¡å‡ºæ¥å°±æ˜¯ä¸ºäº†**åˆ é™¤æ‰€æœ‰**ç­‰äº `x` çš„å…ƒç´ ã€‚

å¦‚æœä½ åªæƒ³åˆ é™¤**æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª** `x`ï¼Œ**ä¸èƒ½**ç”¨ `remove`ï¼Œè€Œæ˜¯è¦é…åˆ `find` ä½¿ç”¨ã€‚è¿™ä¸ªé€»è¾‘æ¯” `remove` ç®€å•ç›´è§‚å¾—å¤šï¼š

C++

```cpp
// å‡è®¾ region[a] æ˜¯: {1, 3, 5, 3, 2}ï¼Œæˆ‘ä»¬è¦åˆ é™¤ç¬¬ä¸€ä¸ª 3

// 1. æ‰¾åˆ°ç¬¬ä¸€ä¸ª x çš„ä½ç½® (è¿­ä»£å™¨)
auto it = find(region[a].begin(), region[a].end(), x);

// 2. åªæœ‰æ‰¾åˆ°äº†æ‰åˆ é™¤
if (it != region[a].end()) {
    region[a].erase(it); // vector/deque çš„ erase åªåˆ è¿™ä¸€ä¸ªä½ç½®
}

// ç»“æœ: {1, 5, 3, 2} (åé¢çš„ 3 ä¿ç•™äº†)
```

è¿™ä¸ªæ­é…åè€Œæ˜¯ä½ åº”è¯¥è®°ä¸€ä¸‹çš„ï¼Œå› ä¸º**â€œåªåˆ ä¸€ä¸ªâ€**åœ¨é¢˜ç›®ä¸­å‡ºç°çš„é¢‘ç‡éå¸¸é«˜ã€‚



### List

é“¾è¡¨ï¼Œä¸å¯ç´¢å¼•

æ—¢ç„¶ä½ å·²ç»æŒæ¡äº† `vector` å’Œ `deque`ï¼Œç°åœ¨æ€»ç»“ `std::list` ä¼šéå¸¸è½»æ¾ã€‚

`std::list` åœ¨ C++ ä¸­æ˜¯ä¸€ä¸ª **åŒå‘é“¾è¡¨ (Doubly Linked List)**ã€‚å®ƒçš„å†…å­˜æ˜¯ä¸è¿ç»­çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥ã€‚

------

#### 1. æ ¸å¿ƒå±æ€§ (Properties)

- **åº•å±‚ç»“æ„**ï¼šåŒå‘é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹å­˜ 3 æ ·ä¸œè¥¿ï¼š`[å‰é©±æŒ‡é’ˆ | æ•°æ® | åç»§æŒ‡é’ˆ]`ã€‚
- **ä¸æ”¯æŒéšæœºè®¿é—®**ï¼š**æ²¡æœ‰** `[]` æ“ä½œç¬¦ï¼Œä¹Ÿ**æ²¡æœ‰** `.at()`ã€‚ä½ ä¸èƒ½ç›´æ¥è®¿é—® `list[5]`ã€‚
- **è¿­ä»£å™¨**ï¼šåŒå‘è¿­ä»£å™¨ (`Bidirectional Iterator`)ã€‚åªèƒ½ `++` æˆ– `--`ï¼Œ**ä¸èƒ½** `+5` æˆ– `-3`ã€‚
- **è¿­ä»£å™¨ç¨³å®šæ€§**ï¼š**æå¼º**ã€‚æ’å…¥æˆ–åˆ é™¤å…ƒç´ **ä¸ä¼š**å¯¼è‡´å…¶ä»–å…ƒç´ çš„è¿­ä»£å™¨å¤±æ•ˆï¼ˆè¿™æ˜¯ `vector` åšä¸åˆ°çš„ï¼‰ã€‚

------

#### 2. åŸºç¡€æ–¹æ³• (Common Methods)

è¿™äº›æ–¹æ³•å¤§å¤šæ•°å®¹å™¨éƒ½æœ‰ï¼Œä½†è¦æ³¨æ„å¤æ‚åº¦ã€‚

##### å¤´éƒ¨ä¸å°¾éƒ¨æ“ä½œ (å…¨éƒ¨ $O(1)$)

- `push_back(x)` / `pop_back()`: å°¾éƒ¨ å¢/åˆ ã€‚
- `push_front(x)` / `pop_front()`: å¤´éƒ¨ å¢/åˆ ã€‚
- `front()` / `back()`: è®¿é—® å¤´/å°¾ å…ƒç´ çš„å€¼ã€‚

##### å¢åˆ æŸ¥ (è¿­ä»£å™¨æ“ä½œ)

- `begin()` / `end()`: è·å–å¤´å°¾è¿­ä»£å™¨ã€‚
- `insert(it, x)`: åœ¨è¿­ä»£å™¨ `it` **ä¹‹å‰** æ’å…¥ `x`ã€‚ ($O(1)$)
- `erase(it)`: åˆ é™¤è¿­ä»£å™¨ `it` æŒ‡å‘çš„å…ƒç´ ã€‚ ($O(1)$)
- `size()`: è¿”å›å…ƒç´ ä¸ªæ•°ã€‚ ($O(1)$)
- `empty()`: åˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚
- `clear()`: æ¸…ç©ºé“¾è¡¨ã€‚

------

#### 3. `list` çš„â€œç‹¬é—¨ç»æŠ€â€ (Unique Methods)

è¿™æ˜¯ `list` æœ€å¼ºå¤§çš„åœ°æ–¹ã€‚ç”±äºå®ƒæ˜¯é“¾è¡¨ï¼Œå®ƒæœ‰ä¸€äº› `vector` å’Œ `deque` æ²¡æœ‰çš„ã€æˆ–è€…æ•ˆç‡æé«˜çš„ä¸“ç”¨æˆå‘˜å‡½æ•°ã€‚

##### A. æ‹¼æ¥ (Splice) â€”â€” â­ï¸ æœ€é‡è¦

å°†ä¸€ä¸ªé“¾è¡¨çš„å…ƒç´ ï¼ˆå…¨éƒ¨æˆ–éƒ¨åˆ†ï¼‰ç§»åŠ¨åˆ°å¦ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚**ä¸å‘ç”Ÿæ‹·è´ï¼Œåªæ˜¯ä¿®æ”¹æŒ‡é’ˆï¼Œé€Ÿåº¦æå¿« $O(1)$ã€‚**

C++

```cpp
list1.splice(pos, list2);      // æŠŠ list2 å…¨æ¥åœ¨ list1 çš„ pos ä½ç½®ï¼Œlist2 å˜ç©º
list1.splice(pos, list2, it);  // æŠŠ list2 ä¸­çš„ it èŠ‚ç‚¹ç§»åˆ° list1 çš„ pos ä½ç½®
//pos å¯ä»¥æ˜¯ list.begin()
```

*(åˆšæ‰çš„â€œäºšå…‹æ˜Ÿå†›é˜Ÿâ€é¢˜ç›®å°±æ˜¯é è¿™ä¸ªç§’æ€çš„)*

##### B. ç§»é™¤ (Remove)

ç›´æ¥æŒ‰å€¼åˆ é™¤å…ƒç´ ï¼Œä¸éœ€è¦é…åˆ `algorithm` åº“ã€‚

C++

```cpp
myList.remove(10); // åˆ é™¤ list ä¸­æ‰€æœ‰ç­‰äº 10 çš„å…ƒç´ 
```

*(å¯¹æ¯”ï¼švector éœ€è¦ç”¨ `std::remove` + `erase` ç»„åˆæ‹³)*

##### C. æ’åº (Sort)

æ³¨æ„ï¼š std::list ä¸èƒ½ä½¿ç”¨æ ‡å‡†åº“çš„ std::sort(list.begin(), list.end())ï¼Œå› ä¸ºæ ‡å‡†æ’åºéœ€è¦éšæœºè®¿é—®è¿­ä»£å™¨(å¿«æ’éœ€è¦ç´¢å¼•)ã€‚

å¿…é¡»ä½¿ç”¨æˆå‘˜å‡½æ•°ï¼š

C++

```cpp
myList.sort(); // O(N log N)
```

##### D. å»é‡ (Unique)

åˆ é™¤**è¿ç»­**çš„é‡å¤å…ƒç´ ï¼ˆé€šå¸¸éœ€è¦å…ˆ sortï¼‰ã€‚

C++

```cpp
myList.unique(); // 1 1 2 2 3 -> 1 2 3
```

##### E. å½’å¹¶ (Merge)

åˆå¹¶ä¸¤ä¸ª**å·²æ’åº**çš„é“¾è¡¨ï¼Œåˆå¹¶åä¾ç„¶æœ‰åºï¼Œä¸”å¦ä¸€ä¸ªé“¾è¡¨ä¼šè¢«æ¸…ç©ºã€‚

C++

```cpp
list1.merge(list2); 
```

##### F. åè½¬ (Reverse)

ç¿»è½¬é“¾è¡¨ã€‚

C++

```cpp
myList.reverse();
```

------

#### 4. ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ `list`ï¼Ÿ(é€ŸæŸ¥è¡¨)

| **åœºæ™¯**                            | **æ¨èå®¹å™¨**       | **ç†ç”±**                                 |
| ----------------------------------- | ------------------ | ---------------------------------------- |
| **éœ€è¦ä¸‹æ ‡è®¿é—®** (å¦‚ `arr[5]`)      | `vector` / `deque` | `list` ä¸æ”¯æŒ                            |
| **åªåœ¨æœ«å°¾å¢åˆ **                    | `vector`           | å†…å­˜æœ€ç´§å‡‘ï¼Œé€Ÿåº¦æœ€å¿«                     |
| **åªåœ¨å¤´å°¾å¢åˆ **                    | `deque`            | æ¯” `list` çœå†…å­˜                         |
| **é¢‘ç¹åœ¨ä¸­é—´æ’å…¥/åˆ é™¤**             | **`list`**         | `vector` éœ€è¦æ¬ç§»æ•°æ®ï¼Œ`list` åªè¦æ”¹æŒ‡é’ˆ |
| **éœ€è¦æ‹¼æ¥ (æŠŠä¸€å †æ•°æ®ç§»åˆ°å¦ä¸€å †)** | **`list`**         | `splice` æ˜¯ $O(1)$ æ— æ•Œçš„å­˜åœ¨            |
| **å¯¹è±¡éå¸¸å¤§ï¼Œæ‹·è´æˆæœ¬é«˜**          | **`list`**         | æ’å…¥åˆ é™¤æ—¶ä¸æ¶‰åŠå¯¹è±¡æ‹·è´ï¼ŒåªåŠ¨æŒ‡é’ˆ       |

#### 5. ä»£ç é€Ÿè§ˆ

C++

```cpp
#include <iostream>
#include <list>
using namespace std;

int main() {
    list<int> L = {3, 1, 4, 1, 5};

    // 1. æ’åº (å¿…é¡»ç”¨æˆå‘˜å‡½æ•°)
    L.sort(); // 1, 1, 3, 4, 5

    // 2. å»é‡
    L.unique(); // 1, 3, 4, 5

    // 3. å¤´éƒ¨æ’å…¥
    L.push_front(0); // 0, 1, 3, 4, 5

    // 4. éå† (Python é£æ ¼)
    for (auto x : L) {
        cout << x << " ";
    }
    cout << endl;

    // 5. åˆ é™¤æ‰€æœ‰ç­‰äº 3 çš„å…ƒç´ 
    L.remove(3); 

    // 6. Splice æ¼”ç¤º
    list<int> L2 = {100, 200};
    // æŠŠ L2 å…¨éƒ¨æ¥åˆ° L çš„å¤´éƒ¨
    L.splice(L.begin(), L2); 
    
    // ç°åœ¨ L: 100, 200, 0, 1, 4, 5
    // L2: ç©º
    
    return 0;
}
```

### è¡Œæœ«ä¸èƒ½æœ‰ç©ºæ ¼ï¼Ÿ

#### å¯ç´¢å¼•

```cpp
// å…ˆæ‰“å°ç¬¬ä¸€ä¸ªï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
if (!region[a].empty())
{
    cout << region[a][0];
    // è¡Œæœ«æ— ç©ºæ ¼
    // ä»ç¬¬äºŒä¸ªå¼€å§‹ï¼Œæ¯æ¬¡å…ˆæ‰“å°ç©ºæ ¼å†æ‰“å°æ•°å­—
    for (size_t j = 1; j < region[a].size(); j++)
    {
       cout << " " << region[a][j];
    }
```

#### å¯ç´¢å¼•

```cpp
// list ä¸æ”¯æŒä¸‹æ ‡è®¿é—® region[a][j]ï¼Œå¿…é¡»ç”¨è¿­ä»£å™¨æˆ– auto éå†
// è¿™é‡Œç”¨ä¸€ä¸ªå°æŠ€å·§æ§åˆ¶ç©ºæ ¼
bool first = true;
for (auto x : region[a]) 
{
      if (!first) cout << " ";
      cout << x;
      first = false;
}
cout << endl;
```



### ä»£ç 

#### Deque

```cpp
#include <iostream>
#include <vector>
#include <deque>
#include <algorithm> // éœ€è¦å¼•å…¥è¿™ä¸ªå¤´æ–‡ä»¶,ç”¨äºremoveå‡½æ•°
using namespace std;


int main()
{
  ios_base::sync_with_stdio(false);
  cin.tie(NULL);
  int N, M;
  cin >> N >> M;
  vector<deque<int>> region(N + 5);
  for (int i = 0; i < N; i++)
  {
    int num;
    cin >> num;
    for (int j = 0; j < num; j++)
    {
      int arm;
      cin >> arm;
      // +1æ˜¯ä¸ºäº†è®©åŒºåŸŸç¼–å·ä»1å¼€å§‹ï¼ˆ1-basedï¼‰
      region[i + 1].push_back(arm);
    }
  }
  for (int i = 0; i < M; i++)
  {

    char op;
    cin >> op;
    if (op == 'U')
    {
      int a, b;
      cin >> a >> b;
      while (!region[b].empty())
      {
        region[a].push_back(region[b].front());
        region[b].pop_front();
      }
    }
    if (op == 'I')
    {
      int a, x;
      cin >> a >> x;
      region[a].push_front(x);
    }
    if (op == 'D')
    {
      int a, x;
      cin >> a >> x;
      // // åˆ é™¤åŒºåŸŸaä¸­æ‰€æœ‰å€¼ä¸ºxçš„å…ƒç´ 
      // deque<int> temp;
      // while (!region[a].empty())
      // {
      //   int curr = region[a].front();
      //   region[a].pop_front();
      //   if (curr != x)
      //   {
      //     temp.push_back(curr);
      //   }
      // }
      // region[a] = temp;
      
      // è§£é‡Šï¼š
      // remove ä¼šæŠŠæ‰€æœ‰ä¸éœ€è¦åˆ é™¤çš„å…ƒç´ ç§»åˆ°å‰é¢ï¼Œè¿”å›â€œæ–°é€»è¾‘ç»“å°¾â€çš„è¿­ä»£å™¨
      // erase è´Ÿè´£çœŸæ­£æŠŠåé¢çš„åƒåœ¾æ•°æ®åˆ‡æ‰
      auto it = remove(region[a].begin(), region[a].end(), x);
      region[a].erase(it, region[a].end());
    }
    if (op == 'Q')
    {
      int a;
      cin >> a;
      // å…ˆæ‰“å°ç¬¬ä¸€ä¸ªï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
      if (!region[a].empty())
      {
        cout << region[a][0];
        // è¡Œæœ«æ— ç©ºæ ¼
        // ä»ç¬¬äºŒä¸ªå¼€å§‹ï¼Œæ¯æ¬¡å…ˆæ‰“å°ç©ºæ ¼å†æ‰“å°æ•°å­—
        for (size_t j = 1; j < region[a].size(); j++)
        {
          cout << " " << region[a][j];
        }
      }
      else
      {
        cout << -1;
      }
      cout << endl; // å³ä½¿æ˜¯ç©ºçš„ï¼Œä¹Ÿå¯èƒ½éœ€è¦æ¢è¡Œ
    }
  }
}
```

#### List

```cpp
#include <iostream>
#include <vector>
#include <list> // å¼•å…¥ list
#include <algorithm>

using namespace std;

int main()
{
    // æé€Ÿ IO
    ios::sync_with_stdio(false);
    cin.tie(0);

    int N, M;
    if (!(cin >> N >> M)) return 0;

    // å¤–å±‚è¿˜æ˜¯ vectorï¼Œå› ä¸ºè¦ç”¨ region[i] å¿«é€Ÿæ‰¾åˆ°åœ°åŒº
    // å†…å±‚æ”¹æˆ list
    vector<list<int>> region(N + 5);

    // 1. è¯»å…¥æ•°æ®
    for (int i = 0; i < N; i++)
    {
        int num;
        cin >> num;
        for (int j = 0; j < num; j++)
        {
            int arm;
            cin >> arm;
            region[i + 1].push_back(arm);
        }
    }

    // 2. å¤„ç†æ“ä½œ
    for (int i = 0; i < M; i++)
    {
        char op;
        cin >> op;

        if (op == 'U') // åˆå¹¶
        {
            int a, b;
            cin >> a >> b;
            // ã€æ ¸å¿ƒä¼˜åŠ¿ã€‘ splice: å°† region[b] çš„æ‰€æœ‰å…ƒç´ å‰ªåˆ‡å¹¶æ¥åˆ° region[a] çš„æœ«å°¾
            // è¿™ä¸€æ­¥æ˜¯ O(1) çš„ï¼Œæå¿«ï¼
            region[a].splice(region[a].end(), region[b]);
        }
        else if (op == 'I') // æ’å…¥
        {
            int a, x;
            cin >> a >> x;
            region[a].push_front(x); // list ä¹Ÿæ”¯æŒ O(1) å¤´éƒ¨æ’å…¥
        }
        else if (op == 'D') // åˆ é™¤
        {
            int a, x;
            cin >> a >> x;
            // list è‡ªå¸¦ remove å‡½æ•°ï¼Œä¸“é—¨åˆ é™¤æ‰€æœ‰ç­‰äº x çš„å…ƒç´ 
            // ä¸éœ€è¦åƒ deque é‚£æ · erase-remove æˆ–è€…å¼€ temp æ•°ç»„
            region[a].remove(x);
        }
        else if (op == 'Q') // æŸ¥è¯¢
        {
            int a;
            cin >> a;
            if (region[a].empty())
            {
                cout << -1 << endl;
            }
            else
            {
                // list ä¸æ”¯æŒä¸‹æ ‡è®¿é—® region[a][j]ï¼Œå¿…é¡»ç”¨è¿­ä»£å™¨æˆ– auto éå†
                // è¿™é‡Œç”¨ä¸€ä¸ªå°æŠ€å·§æ§åˆ¶ç©ºæ ¼
                bool first = true;
                for (auto x : region[a]) 
                {
                    if (!first) cout << " ";
                    cout << x;
                    first = false;
                }
                cout << endl;
            }
        }
    }
    return 0;
}
```



# 4.æ´—ç›˜å­ - çº¦ç‘Ÿå¤«ç¯é—®é¢˜

æ¯æ¬¡ç›´æ¥æ›´æ–°æ•°ç»„

```cpp
#include <bits/stdc++.h>
using namespace std;

vector<int> v(45000,0);
vector<int> luky;

// é¢„å…ˆè®¡ç®—æ‰€æœ‰å¯èƒ½çš„å¹¸è¿çŒª
void precompute(){
    // é¢„å¡«å……è¶³å¤Ÿæ•°é‡çš„çŒªã€‚ç¬¬3000ä¸ªå¹¸è¿çŒªçš„ç¼–å·å°äº35000ã€‚
    // æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå®‰å…¨ä¸Šé™ã€‚
    for (int i = 0; i < 45000; i++){
        v[i] = i + 2;
    }

    while(!v.empty()){
        // é˜Ÿé¦–çš„çŒªæ˜¯å¹¸è¿çŒª
        int luky_num = v[0];
        luky.push_back(v[0]);
        // ç§»é™¤é˜Ÿé¦–çš„å¹¸è¿çŒª
        v.erase(v.begin());
        // å¦‚æœè¦æ´—ç›˜å­çŒªçš„ç´¢å¼•å¤§äºå½“å‰çŒªçš„æ•°é‡ï¼Œè¿›å…¥ä¸‹ä¸€è½®
        if (v.empty() || v.size() < luky_num) continue;

        //åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ•°ç»„å­˜å‚¨å‰©ä½™å…ƒç´  å³ä¸‹ä¸€è½®çš„çŒªé˜Ÿåˆ—
        vector<int> temp;
        for(int i = 0; i < v.size(); i++){
            // ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥ç¬¬kä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯k-1
            // æˆ‘ä»¬è¦ç§»é™¤ç¬¬ lucky_val, 2*lucky_val, ... ä¸ªå…ƒç´ 
            // å®ƒä»¬çš„ç´¢å¼•æ˜¯ lucky_val-1, 2*lucky_val-1, ...
            if ((i + 1) % luky_num != 0){
                temp.push_back(v[i]);
            }
        }
        v = temp;
    }
}

int main(){
    precompute();
    int T;
    cin >> T;
    while (T--){
        int n;
        cin >> n;
        cout << luky[n - 1] << endl;
    }
    return 0;

}


7 8
#.#####.
#.a#..r.
#..#x...
..#..#.#
#...##..
.#......
........
```

# 5.Rescue the princess - BFSï¼ˆè¿ªæ°æ–¯ç‰¹æ‹‰ï¼‰

### æ€è·¯

å°±æ˜¯ç”¨bfså‘å…¨å›¾æœç´¢

å°†é‡åˆ°çš„ç‚¹çš„æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­å¤„ç†ï¼Œéœ€è¦é™„å¸¦å½“å‰cost

ç”¨distå®ç°è®°å¿†åŒ–ï¼Œå¹¶æ›´æ–°åˆ°è¾¾æ¯ä¸ªç‚¹çš„cost



å½“è¿›å…¥ä¸€ä¸ªç‚¹

å–å‡ºå‘å››å‘¨èµ°ï¼Œè¾¹ç•Œä¸å¢™ä¸èƒ½èµ°

èƒ½èµ°çš„èŠ±é”€+1ï¼Œé‡åˆ°æ€ªç‰©å†+1

æ£€æµ‹æ–°èµ°åˆ°çš„ç‚¹çš„èŠ±é”€æ˜¯å¦å°äºdistè®°å½•çš„ï¼Œå¦‚æœå°äºå°±æ›´æ–°ã€‚



### ä»£ç 

#### æ™®é€šé˜Ÿåˆ—å½¢å¼

```cpp
#include <bits/stdc++.h>
using namespace std;

// 4ä¸ªç§»åŠ¨æ–¹å‘
const int directions[4][2] = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};

// BFSå‡½æ•°
void bfs(int dir_a[2], int dir_r[2], vector<vector<char>> &gra, int n, int m)
{

  vector<vector<int>> dist(n, vector<int>(m, INT_MAX));

  // C++11æ”¯æŒtupleï¼Œæ›¿ä»£é”™è¯¯çš„pair<int,int,int>
  queue<tuple<int, int, int>> q;

  // 1. èµ·ç‚¹å…¥é˜Ÿ
  q.push(make_tuple(dir_r[0], dir_r[1], 0)); // C++11ç”¨make_tupleæ„é€ tuple
  dist[dir_r[0]][dir_r[1]] = 0;

  // 2. å¼€å§‹BFSå¾ªç¯
  while (!q.empty())
  { // C++11æ¨è!empty()æ›¿ä»£size()

    // 2.1 å–å‡ºé˜Ÿé¦–å…ƒç´ ï¼ˆC++11ä¸æ”¯æŒç»“æ„åŒ–ç»‘å®šï¼Œç”¨getè·å–ï¼‰
    int x = get<0>(q.front());
    int y = get<1>(q.front());
    int d = get<2>(q.front());
    q.pop();

    // 2.2 å¦‚æœé˜Ÿåˆ—ä¸­å–å‡ºçš„ d å·²ç»æ¯”distè®°å½•çš„è·ç¦»å¤§ï¼Œè¯´æ˜è¯¥ä½ç½®å·²ç»è¢«æ›´ä¼˜è·¯å¾„è®¿é—®è¿‡ï¼Œè·³è¿‡
    if (d > dist[x][y])
      continue;

    // 2.3 éå†4ä¸ªæ–¹å‘
    for (int i = 0; i < 4; i++)
    {
      int nx = x + directions[i][0];
      int ny = y + directions[i][1];

      // 2.4 åˆ¤æ–­æ–°ä½ç½®æ˜¯å¦åˆæ³•
      if (nx < 0 || nx >= n || ny < 0 || ny >= m)
        continue;
      if (gra[nx][ny] == '#')
        continue; // éšœç¢ç‰©ä¸å¯é€šè¡Œ

      // 2.5 è®¡ç®—æ–°ä½ç½®çš„è·ç¦»
      int nd = d + 1;

      // 2.6 æ€æ€ªæ—¶é—´
      if (gra[nx][ny] == 'x')
      {
        nd += 1; // æ€æ€ªéœ€è¦é¢å¤–æ—¶é—´
      }

      // 2.7 å¦‚æœæ–°ä½ç½®çš„è·ç¦»æ›´ä¼˜ï¼Œæ›´æ–°è·ç¦»å¹¶å…¥é˜Ÿ
      if (nd < dist[nx][ny])
      {
        dist[nx][ny] = nd;
        q.push(make_tuple(nx, ny, nd)); // C++11ç”¨make_tupleå…¥é˜Ÿ
      }
    }
  }

  // ä¿®æ­£ç»“æœç±»å‹é”™è¯¯ï¼šdistå…ƒç´ æ˜¯intï¼Œä¸æ˜¯pair
  int res = dist[dir_a[0]][dir_a[1]];
  if (res == INT_MAX)
  {
    cout << -1 << endl;
    return;
  }
  cout << res << endl;
}

int main()
{

  int n, m;
  cin >> n >> m;
  int dir_a[2];
  int dir_r[2];
  vector<vector<char>> gra(n, vector<char>(m));
  for (int i = 0; i < n; i++)
  {
    for (int j = 0; j < m; j++)
    {
      cin >> gra[i][j];
      if (gra[i][j] == 'a')
      {
        dir_a[0] = i;
        dir_a[1] = j;
      }
      if (gra[i][j] == 'r')
      {
        dir_r[0] = i;
        dir_r[1] = j;
      }
    }
  }

  bfs(dir_a, dir_r, gra, n, m);
  return 0;
}
```

#### ä¼˜å…ˆé˜Ÿåˆ—å½¢å¼

ç¡®å®æœ‰ä¼˜åŒ–ä¸€äº›

ä½¿ç”¨å°å †é¡¶ï¼Œä¼˜å…ˆå¯¹è·ç¦»æ›´çŸ­çš„ç‚¹è¿›è¡Œå¤„ç†ï¼Œå…¶ä»–ä¸å˜



```cpp
#include <bits/stdc++.h>
using namespace std;

// 4ä¸ªç§»åŠ¨æ–¹å‘
int des[4][2] = {{1, 0}, {-1, 0}, {0, 1}, {0, -1}};

int bfs(pair<int, int> start, pair<int, int> end, vector<vector<char>> &gra, int N, int M){

    //åˆå§‹åŒ–è®°å¿†æ•°ç»„
    vector<vector<int>> dist(n, vector<int>(m, INT_MAX));

    priority_queue<tuple<int,int,int>, vector<tuple<int,int,int>>, greater<tuple<int,int,int>>> pq;
    
    pq.push(make_tuple(0, start.first, start.second));
    dist[start.first][start.second] = 0;
    
    while(!pq.empty()){
        auto t = pq.top();
        int d = get<0>(t);
        int x = get<1>(t);
        int y = get<2>(t);
        pq.pop();

        if(d > dist[x][y]) continue;
        
        // æ‰¾åˆ°å…¬ä¸»ç›´æ¥é€€å‡ºï¼ˆå¯é€‰ä¼˜åŒ–ï¼Œä¸åŠ ä¹Ÿæ²¡äº‹ï¼Œåæ­£æœ€åæœ‰ distï¼‰
        if(x == end.first && y == end.second){
            return d;
        }
        for(int i = 0; i < 4; i++){
            int nx = x + des[i][0];
            int ny = y + des[i][1];
            if(nx >= 0 && nx < N && ny >= 0 && ny < M && gra[nx][ny] != '#'){
                int nd = d + 1;
                if(gra[nx][ny] == 'x'){
                    nd += 1;
                }
                if(nd < dist[nx][ny]){
                    dist[nx][ny] = nd;
                    pq.push(make_tuple(nd, nx, ny));
                }
            }
        }
    }
    if (dist[end.first][end.second] != INT_MAX){
        return dist[end.first][end.second];
    }
    return -1;
}



int main(){

    int N, M;
    cin >> N >> M;
    vector<vector<char>> gra(N, vector<char>(M));

    pair<int, int> gongzhu = make_pair(-1, -1);
    pair<int, int> yongshi = make_pair(-1, -1);

    for(int i = 0; i < N; i++){
        for(int j = 0; j < M; j++){
            cin >> gra[i][j];
            if(gra[i][j] == 'r'){
                yongshi = make_pair(i, j);
            }
            if(gra[i][j] == 'a'){
                gongzhu = make_pair(i, j);
            }
        }
    }

    int res = bfs(yongshi, gongzhu, gra, N, M);
    cout << res << endl;
    return 0;
}
```

##### ä¼˜å…ˆé˜Ÿåˆ—çš„è‡ªå®šä¹‰

$a æ¯”è¾ƒå™¨ b$

å¦‚æœè¿”å›ä¸ºTrueï¼Œbä¼˜å…ˆçº§é«˜

å¦‚æœè¿”å›ä¸ºFalseï¼Œaä¼˜å…ˆçº§é«˜

ä¸¾ä¸ªä¾‹å­ï¼Œé»˜è®¤çš„less å³ $a<b$

å¯¹äºa=1,b=2 ï¼Œç»“æœä¸ºTrueï¼Œæ‰€ä»¥bçš„ä¼˜å…ˆçº§é«˜ï¼›æ„å‘³ç€è¿™æ˜¯ä¸€ä¸ªå¤§é¡¶å †ã€‚

è¿™é“é¢˜æ¥è¯´ï¼Œä¼˜å…ˆé€‰æ‹©è·ç¦»å°çš„ï¼Œå› æ­¤ä½¿ç”¨greaterã€‚



##### ä¼˜å…ˆé˜Ÿåˆ—çš„é¡¶

q.top()

ä¸æ˜¯q.front()

##### tuple

make_tuple(   )

get<0> get<1>



# 6. äº¤æ˜“ - Deque

æ²¡å•¥å¥½è¯´çš„

```cpp
#include <bits/stdc++.h>
using namespace std;

int main(){
  int n;
  cin >> n;

  deque<int> a(n);
  for(int i = 0; i < n; i++) a[i] = i + 1;

  bool flag = true;
  while(a.size() > 1){
    int x = a.front();
    cout << x << " " ;
    a.pop_front();
    int y = a.front();
    a.pop_front();
    a.push_back(y);
  }
  cout << endl;
  cout << a.front() << endl;
  return 0;
}
```

# 7. ç«è½¦ - æ ˆ

### æ€è·¯

ç”¨å­—ç¬¦ä¸²å­˜å‚¨è¾“å…¥å³å¯

éå†Inçš„

é‡åˆ°å¯ä»¥å‡ºæ ˆçš„å°±ä¸€ç›´å‡ºç›´åˆ°æ²¡æ³•å‡ºï¼ˆæ¡ä»¶æ˜¯æ ˆéç©º ä¸” æ ˆé¡¶ç­‰äºå½“å‰å‡ºåºåˆ—ï¼‰

æœ€åæ£€æµ‹æ ˆä¸­æ˜¯å¦æœ‰å‰©ä½™å…ƒç´ ä¾¿å¯ä»¥çŸ¥é“è¡Œä¸è¡Œ

### ä»£ç 


```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    // ä¼˜åŒ–1ï¼šIOåŠ é€Ÿï¼ˆè™½ç„¶Nå¾ˆå°å½±å“ä¸å¤§ï¼Œä½†å…»æˆå¥½ä¹ æƒ¯ï¼‰
    ios::sync_with_stdio(false);
    cin.tie(0);

    int n;
    cin >> n;

    string in_seq, out_seq;
    cin >> in_seq >> out_seq;

    stack<char> st;
    vector<string> ops; // ç”¨äºè®°å½•æ“ä½œæ­¥éª¤ "in" æˆ– "out"

    int out_idx = 0; // æŒ‡å‘å‡ºç«™åºåˆ—çš„å½“å‰ç›®æ ‡

    // ä¼˜åŒ–2ï¼šæ ¸å¿ƒé€»è¾‘é‡å†™
    // åªæœ‰æ¯ä¸€ä¸ªå…¥ç«™ç«è½¦éƒ½å¤„ç†å®Œäº†ï¼Œæ‰èƒ½åˆ¤æ–­ç»“æŸ
    for (int i = 0; i < n; i++)
    {
        // 1. å¿…é¡»å…ˆè¿›ç«™
        st.push(in_seq[i]);
        ops.push_back("in");

        // 2. è¿›ç«™åï¼Œæ£€æŸ¥èƒ½å¦å‡ºç«™ï¼ˆè´ªå¿ƒï¼šèƒ½å‡ºå°±ä¸€ç›´å‡ºï¼‰
        // æ³¨æ„æ£€æŸ¥ !st.empty() é˜²æ­¢è¶Šç•Œ
        while (!st.empty() && st.top() == out_seq[out_idx])
        {
            st.pop();
            ops.push_back("out");
            out_idx++;
        }
    }

    // ä¼˜åŒ–3ï¼šæœ€ç»ˆåˆ¤æ–­
    // å¦‚æœæ ˆç©ºäº†ï¼Œè¯´æ˜æ‰€æœ‰ç«è½¦éƒ½åŒ¹é…å¹¶å‡ºç«™äº†
    if (st.empty())
    {
        cout << "Yes" << endl; // æ³¨æ„é¢˜ç›®å¤§å°å†™ Yes vs YES
        for (const string &op : ops)
        {
            cout << op << endl;
        }
    }
    else
    {
        cout << "No" << endl;
    }

    return 0;
}
```

# 8. ä»·å€¼ - å•è°ƒæ ˆ

### æ€è·¯

#### ğŸ’¡ æ ¸å¿ƒæ€è·¯ï¼šä»¥æ­¤ä¸ºç‹ï¼Œå‘ä¸¤ä¾§æ‰©å¼ 

1. **æ ¸å¿ƒå…¬å¼ï¼š** ä»·å€¼ = `åŒºé—´å’Œ` Ã— `åŒºé—´æœ€å°å€¼`
2. **æš´åŠ›æ³•çš„ç—›ç‚¹ï¼š** å¦‚æœæˆ‘ä»¬è¦æšä¸¾æ‰€æœ‰çš„åŒºé—´ï¼ˆèµ·ç‚¹iåˆ°ç»ˆç‚¹jï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(N^2)$ï¼Œå¯¹äº $N=100,000$ çš„æ•°æ®é‡è‚¯å®šä¼šè¶…æ—¶ã€‚
3. **é€†å‘æ€ç»´ï¼ˆä¼˜åŒ–æ³•ï¼‰ï¼š**
   - æˆ‘ä»¬ä¸æšä¸¾åŒºé—´ï¼Œè€Œæ˜¯**æšä¸¾æ¯ä¸€ä¸ªæ•°å­—**ï¼Œå‡è®¾**å®ƒå°±æ˜¯å½“å‰åŒºé—´çš„æœ€å°å€¼**ã€‚
   - æ—¢ç„¶å®ƒæ˜¯â€œæœ€å°å€¼â€ï¼Œé‚£å°±æ„å‘³ç€è¿™ä¸ªåŒºé—´é‡Œçš„å…¶ä»–æ•°å­—éƒ½å¿…é¡»**å¤§äºç­‰äº**å®ƒã€‚
   - æˆ‘ä»¬å°±ä»¥è¿™ä¸ªæ•°å­—ä¸ºä¸­å¿ƒï¼Œå‘å·¦æ‰¾ï¼Œå‘å³æ‰¾ï¼Œç›´åˆ°ç¢°åˆ°**ç¬¬ä¸€ä¸ªæ¯”å®ƒå°**çš„æ•°å­—ä¸ºæ­¢ã€‚è¿™ä¸¤ä¸ªè¾¹ç•Œä¸­é—´çš„éƒ¨åˆ†ï¼Œå°±æ˜¯ä»¥å®ƒä¸ºæœ€å°å€¼çš„æœ€å¤§èŒƒå›´ã€‚
   - è®¡ç®—è¿™ä¸ªèŒƒå›´çš„`åŒºé—´å’Œ`ï¼Œä¹˜ä»¥å®ƒè‡ªå·±ï¼Œç®—å‡ºä¸€ä¸ªä»·å€¼ã€‚
   - æŠŠæ‰€æœ‰æ•°å­—ç®—å‡ºæ¥çš„ä»·å€¼å¯¹æ¯”ä¸€ä¸‹ï¼Œå–æœ€å¤§çš„é‚£ä¸ªã€‚

#### ğŸ› ï¸ æ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°è¾¹ç•Œï¼Ÿ- å•è°ƒæ ˆ

å•è°ƒæ ˆï¼ˆMonotonic Stackï¼‰æ˜¯ç®—æ³•ç«èµ›å’Œé¢è¯•ä¸­éå¸¸é«˜é¢‘çš„æ•°æ®ç»“æ„æŠ€å·§ã€‚å®ƒçš„æ ¸å¿ƒåŸç†å…¶å®éå¸¸ç®€å•ï¼Œå°±ä¸€å¥è¯ï¼š

**â€œåŠæ—¶æ­¢æŸï¼Œä¼˜èƒœåŠ£æ±°ã€‚â€**

æˆ‘ä»¬ä¸ç”¨æ¯ç‡¥çš„å®šä¹‰ï¼Œç”¨ä¸€ä¸ªé€šä¿—çš„åœºæ™¯æ¥å½»åº•æ‹†è§£å®ƒã€‚

##### 1. æ ¸å¿ƒåº”ç”¨åœºæ™¯

å•è°ƒæ ˆåªè§£å†³ä¸€ç±»ç‰¹å®šçš„é—®é¢˜ï¼š

åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸€ä¸ªæ•°æƒ³è¦çŸ¥é“å®ƒå·¦è¾¹ï¼ˆæˆ–å³è¾¹ï¼‰ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§ï¼ˆæˆ–å°ï¼‰çš„æ•°æ˜¯è°/åœ¨å“ªé‡Œã€‚

- **æš´åŠ›åšæ³•ï¼š** æ¯ä¸ªäººéƒ½å¾€æ—è¾¹çœ‹ï¼Œçœ‹ä¸€ä¸ªä¸æ˜¯ï¼Œå†çœ‹ä¸‹ä¸€ä¸ªâ€¦â€¦ $O(N^2)$ã€‚
- **å•è°ƒæ ˆåšæ³•ï¼š** $O(N)$ã€‚

------

##### 2. é€šä¿—åŸç†è§£æï¼šæ’é˜Ÿçœ‹æµ·

æƒ³è±¡ä¸€ç¾¤äººæ’é˜Ÿçœ‹æµ·ï¼ˆæ•°ç»„ï¼‰ï¼Œæ¯ä¸ªäººéƒ½æœ‰èº«é«˜ã€‚

**åœºæ™¯ï¼šæ‰¾æ¯ä¸ªäººå³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±é«˜çš„äººã€‚**

æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ª**æ ˆ**ï¼Œè¿™ä¸ªæ ˆä»£è¡¨**â€œç›®å‰è¿˜æ²¡æ‰¾åˆ°æ¯”è‡ªå·±é«˜çš„äººçš„é›†åˆâ€**ã€‚ä¸ºäº†ä¿è¯æŸ¥æ‰¾æ•ˆç‡ï¼Œæˆ‘ä»¬è§„å®šï¼š**æ ˆé‡Œçš„èº«é«˜å¿…é¡»æ˜¯ä»é«˜åˆ°çŸ®æ’åˆ—çš„ï¼ˆå•è°ƒé€’å‡æ ˆï¼‰ã€‚**

#### è§„åˆ™æ¼”ç¤ºï¼š

å½“ä¸€ä¸ªæ–°çš„â€œæŒ‘æˆ˜è€…â€ï¼ˆæ–°å…ƒç´ ï¼‰å‡ºç°æ—¶ï¼š

1. **æ¯”è¾ƒï¼š** å¦‚æœæŒ‘æˆ˜è€…æ¯”æ ˆé¡¶çš„äºº**é«˜**ã€‚
2. **æ·˜æ±°ï¼ˆPopï¼‰ï¼š** æ ˆé¡¶çš„äººå¾ˆæ‚²ä¼¤ï¼šâ€œå“å‘€ï¼Œå³è¾¹ç»ˆäºå‡ºç°äº†ä¸€ä¸ªæ¯”æˆ‘é«˜çš„äººï¼ˆå°±æ˜¯æŒ‘æˆ˜è€…ï¼‰ï¼Œæˆ‘çš„ä½¿å‘½ç»“æŸäº†ã€‚â€ -> **è®°å½•ç­”æ¡ˆ**ï¼Œæ ˆé¡¶ç¦»å¼€ã€‚
3. **å¾ªç¯ï¼š** æŒ‘æˆ˜è€…ç»§ç»­å’Œæ–°çš„æ ˆé¡¶æ¯”ï¼Œå¦‚æœè¿˜æ¯”æ–°æ ˆé¡¶é«˜ï¼Œç»§ç»­æ·˜æ±°æ ˆé¡¶â€¦â€¦ç›´åˆ°æ ˆé¡¶æ¯”æŒ‘æˆ˜è€…é«˜ï¼Œæˆ–è€…æ ˆç©ºäº†ã€‚
4. **å…¥æ ˆï¼ˆPushï¼‰ï¼š** æŒ‘æˆ˜è€…æ­¤æ—¶æ²¡æ³•æ·˜æ±°åˆ«äººäº†ï¼Œä¹–ä¹–è¿›æ ˆæ’é˜Ÿï¼Œç­‰å¾…æœªæ¥å³è¾¹å‡ºç°æ¯”ä»–æ›´é«˜çš„äººã€‚

ä¸ºä»€ä¹ˆå«â€œå•è°ƒâ€ï¼Ÿ

å› ä¸ºåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç•™åœ¨æ ˆé‡Œçš„äººï¼Œæ°¸è¿œæ˜¯è¿˜æ²¡æ‰¾åˆ°ç­”æ¡ˆçš„äººï¼Œè€Œä¸”ä»–ä»¬çš„èº«é«˜ä¸€å®šæ˜¯æœ‰åºçš„ï¼ˆåœ¨è¿™ä¸ªä¾‹å­é‡Œæ˜¯é€’å‡ï¼‰ã€‚ä¸€æ—¦å‡ºç°è¿åé¡ºåºçš„æ•°ï¼Œå°±ä¼šè§¦å‘â€œå¼¹å‡ºâ€æ“ä½œã€‚

------

##### 3. æ¼”ç¤ºï¼ˆç»“åˆä½ çš„é¢˜ç›®ï¼‰

å›åˆ°ä½ çš„é¢˜ç›®ï¼šæˆ‘ä»¬è¦æ‰¾ä¸¤è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å°çš„æ•°ã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬è¦ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å¢æ ˆï¼ˆæ ˆåº•å°ï¼Œæ ˆé¡¶å¤§ï¼‰ã€‚å¦‚æœæ¥äº†ä¸€ä¸ªæ›´å°çš„æ•°ï¼Œæ ˆé¡¶çš„å¤§ä¸ªå­å°±ä¼šè¢«â€œå‰Šâ€æ‰ã€‚

æ•°ç»„ï¼š[3, 1, 6, 4, 5, 2]

æˆ‘ä»¬è¦æ‰¾æ¯ä¸ªæ•°å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ä½ç½®ã€‚

| **æ­¥éª¤** | **å½“å‰æ•°å­—** | **æ ˆå†…æƒ…å†µ (å­˜ä¸‹æ ‡)** | **å¯¹åº”çš„æ•°å€¼** | **å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**                                             |
| -------- | ------------ | --------------------- | -------------- | ------------------------------------------------------------ |
| **1**    | **3**        | `[0]`                 | `3`            | æ ˆç©ºï¼Œ3 ç›´æ¥å…¥æ ˆã€‚                                           |
| **2**    | **1**        | `[1]`                 | `1`            | **å†²çªï¼** 1 æ¯”æ ˆé¡¶çš„ 3 å°ã€‚ è¯´æ˜ **3 å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å°±æ˜¯ 1**ã€‚ 3 å‡ºæ ˆï¼Œ1 å…¥æ ˆã€‚ |
| **3**    | **6**        | `[1, 2]`              | `1, 6`         | 6 æ¯”æ ˆé¡¶ 1 å¤§ï¼Œç¬¦åˆé€’å¢ï¼Œ6 å…¥æ ˆã€‚                            |
| **4**    | **4**        | `[1, 3]`              | `1, 4`         | **å†²çªï¼** 4 æ¯”æ ˆé¡¶ 6 å°ã€‚ è¯´æ˜ **6 å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å°±æ˜¯ 4**ã€‚ 6 å‡ºæ ˆã€‚æ–°çš„æ ˆé¡¶æ˜¯ 1ï¼Œ4 æ¯” 1 å¤§ï¼Œ4 å…¥æ ˆã€‚ |
| **5**    | **5**        | `[1, 3, 4]`           | `1, 4, 5`      | 5 æ¯”æ ˆé¡¶ 4 å¤§ï¼Œå…¥æ ˆã€‚                                        |
| **6**    | **2**        | `[1, 5]`              | `1, 2`         | **è¿ç¯å†²çªï¼**  1. 2 æ¯” 5 å° -> **5 çš„å³è¾¹ç•Œæ˜¯ 2**ï¼Œ5 å‡ºæ ˆã€‚ 2. 2 æ¯” 4 å° -> **4 çš„å³è¾¹ç•Œæ˜¯ 2**ï¼Œ4 å‡ºæ ˆã€‚ 3. 2 æ¯” 1 å¤§ -> 2 å…¥æ ˆã€‚ |

æ­¤æ—¶æ ˆé‡Œå‰© [1, 2] (å¯¹åº”æ•°å€¼ 1, 2)ã€‚

å¾ªç¯ç»“æŸï¼Œå‰©ä¸‹çš„äººè¯´æ˜å³è¾¹æ²¡æœ‰æ¯”ä»–ä»¬å°çš„æ•°ï¼ˆå¯ä»¥ç†è§£ä¸ºå³è¾¹ç•Œæ˜¯ $N+1$ï¼‰ã€‚

------

##### 4. ä¸ºä»€ä¹ˆå®ƒæ˜¯ O(N) çš„ï¼Ÿ

ä½ å¯èƒ½ä¼šé—®ï¼š*â€œé‡Œé¢æœ‰ä¸ª `while` å¾ªç¯ï¼Œè¿™ä¸ä¼šå˜æˆ $O(N^2)$ å—ï¼Ÿâ€*

**ä¸ä¼šã€‚** è¯·è®°ä½è¿™ä¸ªç»å¯¹çœŸç†ï¼š

> åœ¨æ•´ä¸ªç®—æ³•è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ•°ç»„ä¸­çš„**æ¯ä¸€ä¸ªå…ƒç´ **ï¼Œæœ€å¤šåªæœ‰ä¸€æ¬¡**è¿›æ ˆ**çš„æœºä¼šï¼Œä¹Ÿæœ€å¤šåªæœ‰ä¸€æ¬¡**å‡ºæ ˆ**çš„æœºä¼šã€‚

- ä½ è¿›æ¥äº†ï¼Œä»¥åè¦ä¹ˆä¸€ç›´ç•™ç€ï¼Œè¦ä¹ˆè¢«å¼¹å‡ºå»å†ä¹Ÿä¸å›æ¥ã€‚
- æ“ä½œæ¬¡æ•°æé™æ˜¯ $2 \times N$ æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ä¸¥æ ¼çš„ **$O(N)$**ã€‚

------

##### 5. ä¸‡èƒ½ä»£ç æ¨¡æ¿

åœ¨åšé¢˜æ—¶ï¼Œåªéœ€è¦è®°ä½è¿™ä¸ªæ¨¡æ¿ã€‚æ³¨æ„ï¼š**æ ˆé‡Œé€šå¸¸å­˜ä¸‹æ ‡**ï¼Œå› ä¸ºä¸‹æ ‡èƒ½æ‰¾åˆ°å€¼ï¼Œè¿˜èƒ½ç®—è·ç¦»ã€‚

C++

```cpp
// æ‰¾å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±ã€å°ã€‘çš„æ•° -> ç»´æŠ¤ã€å•è°ƒé€’å¢ã€‘æ ˆ
// æ‰¾å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±ã€å¤§ã€‘çš„æ•° -> ç»´æŠ¤ã€å•è°ƒé€’å‡ã€‘æ ˆ

stack<int> st;
for (int i = 0; i < n; i++) {
    // ã€å…³é”®ã€‘ï¼šè¿™é‡Œå†³å®šæ˜¯æ‰¾å¤§è¿˜æ˜¯æ‰¾å°
    // å¦‚æœæ˜¯ a[i] <= a[st.top()]ï¼Œè¯´æ˜å½“å‰æ•°æ¯”æ ˆé¡¶å°ï¼Œæ‰“ç ´äº†é€’å¢è¶‹åŠ¿
    // è¯´æ˜æ ˆé¡¶å…ƒç´ æ‰¾åˆ°äº†å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°ï¼ˆå³ a[i]ï¼‰
    while (!st.empty() && a[i] <= a[st.top()]) {
        int index = st.top();
        st.pop();
        // æ­¤æ—¶ï¼š
        // index æ˜¯â€œè¢«å¼¹å‡ºè€…â€çš„ä¸‹æ ‡
        // i æ˜¯â€œå³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°â€çš„ä¸‹æ ‡
        R[index] = i; 
    }
    st.push(i);
}
```

##### æ€»ç»“

- **ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ** é¢˜ç›®å‡ºç°â€œå·¦è¾¹ç¬¬ä¸€ä¸ªâ€ã€â€œå³è¾¹ç¬¬ä¸€ä¸ªâ€ã€â€œæ¯”æˆ‘å¤§/å°â€è¿™ç±»å­—çœ¼ã€‚
- **å£è¯€ï¼š**
  - æ‰¾æ¯”è‡ªå·±**å°**çš„ï¼Œç”¨**é€’å¢**æ ˆï¼ˆé‡åˆ°å°çš„å°±å¼¹å‡ºå¤§çš„ï¼‰ã€‚
  - æ‰¾æ¯”è‡ªå·±**å¤§**çš„ï¼Œç”¨**é€’å‡**æ ˆï¼ˆé‡åˆ°å¤§çš„å°±å¼¹å‡ºå°çš„ï¼‰ã€‚

#### ğŸ“ ç®—æ³•æ­¥éª¤

1. **è¾“å…¥æ•°æ®**ï¼ŒåŒæ—¶è®¡ç®—**å‰ç¼€å’Œ**æ•°ç»„ã€‚
2. **åˆ©ç”¨å•è°ƒæ ˆæ‰¾å·¦è¾¹ç•Œ** `L[i]`ï¼šå¯¹äºç¬¬ $i$ ä¸ªæ•°ï¼Œæ‰¾åˆ°å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°çš„ä¸‹æ ‡ã€‚
3. **åˆ©ç”¨å•è°ƒæ ˆæ‰¾å³è¾¹ç•Œ** `R[i]`ï¼šå¯¹äºç¬¬ $i$ ä¸ªæ•°ï¼Œæ‰¾åˆ°å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°çš„ä¸‹æ ‡ã€‚
4. **è®¡ç®—ç­”æ¡ˆ**ï¼šéå†æ¯ä¸ªæ•°ï¼Œåˆ©ç”¨å…¬å¼ï¼š`ä»·å€¼ = a[i] * (sum[R[i]-1] - sum[L[i]])`ï¼Œæ›´æ–°æœ€å¤§å€¼ã€‚
   - *æ³¨æ„ï¼šè¿™é‡Œå³è¾¹ç•Œæ˜¯ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ä½ç½®ï¼Œæ‰€ä»¥å®é™…æœ‰æ•ˆèŒƒå›´æ˜¯ R[i]-1ã€‚å·¦è¾¹ç•ŒåŒç†ï¼Œæœ‰æ•ˆèŒƒå›´ä» L[i]+1 å¼€å§‹ï¼Œä½†åœ¨å‰ç¼€å’Œå…¬å¼é‡Œå‡å» sum[L[i]] æ­£å¥½å¯¹åº”è¿™ä¸ªä½ç½®ã€‚*



### ä»£ç 

æ³¨æ„ä¸¤ä¸ªç‚¹

- è¾¹ç•Œçš„å¤„ç†
- é¢˜ç›®çš„è¦æ±‚å¯èƒ½ä¼šçˆ†int

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    int N;
    if (!(cin >> N))
        return 0; // å¢åŠ è¯»å–æ£€æŸ¥æ˜¯ä¸ªå¥½ä¹ æƒ¯
    vector<int> lis(N);
    for (int i = 0; i < N; ++i)
    {
        cin >> lis[i];
    }

    // ã€ä¿®æ”¹ç‚¹1ã€‘ï¼šå‰ç¼€å’Œå¿…é¡»ç”¨ long longï¼Œå¦åˆ™ä¼šæº¢å‡º
    vector<long long> pre(N + 1, 0);
    for (int i = 0; i < N; ++i)
    {
        pre[i + 1] = pre[i] + lis[i];
    }

    stack<int> st;
    vector<int> left(N), right(N);

    // æ‰¾å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å°çš„
    for (int i = 0; i < N; ++i)
    {
        while (!st.empty() && lis[i] < lis[st.top()])
        {
            right[st.top()] = i;
            st.pop();
        }
        st.push(i);
    }
    while (!st.empty())
    {

        // å¦‚æœæ²¡æœ‰æ¯”è‡ªå·±å°çš„ï¼Œè¯´æ˜å»¶ä¼¸åˆ°ç»ˆç‚¹äº†ã€‚
        right[st.top()] = N; 
        st.pop();
    }

    // æ‰¾å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å°çš„
    // è¿™é‡Œçš„é€»è¾‘å¯ä»¥ç¨å¾®ä¼˜åŒ–ï¼Œä¸ç”¨æ¸…ç©ºæ ˆå†è·‘ä¸€éï¼Œ
    // å®é™…ä¸Šå•è°ƒæ ˆä¸€è¶Ÿæ‰«æå°±å¯ä»¥æ±‚å‡ºå·¦å³ä¸¤è¾¹ï¼Œä¸è¿‡ä½ åˆ†å¼€å†™é€»è¾‘æ›´æ¸…æ™°ï¼Œæ²¡é—®é¢˜ã€‚
    st = stack<int>();
    for (int i = N - 1; i >= 0; --i)
    {
        while (!st.empty() && lis[i] < lis[st.top()])
        {
            left[st.top()] = i;
            st.pop();
        }
        st.push(i);
    }
    while (!st.empty())
    {
        // ã€ä¿®æ”¹ç‚¹2ã€‘ï¼šå¦‚æœæ²¡æœ‰æ¯”è‡ªå·±å°çš„ï¼Œè¯´æ˜å»¶ä¼¸åˆ°èµ·ç‚¹äº†ã€‚
        // å› ä¸ºè®¡ç®—å…¬å¼æ˜¯ pre[R] - pre[L+1]ï¼Œä¸ºäº†è®© L+1=0ï¼Œè¿™é‡Œå¿…é¡»è®¾ä¸º -1
        // å› ä¸ºLæ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å°çš„ä¸‹æ ‡ï¼Œé—­åŒºé—´æ˜¯ [L+1, R-1]ï¼Œæ‰€ä»¥è¦è®©é—­åŒºé—´å·¦ç«¯ç‚¹æ˜¯0ï¼Œå°±å¿…é¡»è®©L=-1
        left[st.top()] = -1;
        st.pop();
    }

    long long ans = 0;
    for (int i = 0; i < N; ++i)
    {
        // å…¬å¼ï¼šåŒºé—´æ˜¯ (left[i], right[i]) å¼€åŒºé—´
        // å¯¹åº”çš„é—­åŒºé—´æ˜¯ [left[i]+1, right[i]-1]
        // å‰ç¼€å’Œè®¡ç®— sum(L, R) = pre[R+1] - pre[L]
        // ä»£å…¥å¾—ï¼špre[right[i]-1 + 1] - pre[left[i]+1] -> pre[right[i]] - pre[left[i]+1]
        ans = max(ans, 1LL * lis[i] * (pre[right[i]] - pre[left[i] + 1]));
    }
    cout << ans << endl;
}
```



# 9. é­”éŸ³å‰ä»– - å·®åˆ†ã€å‰ç¼€å’Œã€äºŒåˆ†æŸ¥æ‰¾

## æ€è·¯

#### ä¸€å¼€å§‹çš„ä»£ç 

```cpp
n = int(input())
lis = sorted(list(set([int(i) for i in input().split()])))

q = int(input())
ans = []

for _ in range(q):
    a, b = map(int, input().split())
    x =  b - a + 1
    ju = b - a + 1
    for i in range(len(lis)-1):
        if lis[i+1] - lis[i] <= ju:
            x += lis[i+1] - lis[i]
        else:
            x += ju
    ans.append(str(x))

print(' '.join(ans))
```

æˆ‘ä»¬æ¥ä¸€æ¬¡**æ€ç»´çš„æ·±åº¦æ‹†è§£**ã€‚

æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•æŠŠä¸€ä¸ªâ€œæ­£ç¡®ä½†æ…¢â€çš„ç®—æ³•ï¼Œè¿›åŒ–æˆä¸€ä¸ªâ€œæ—¢æ­£ç¡®åˆæå¿«â€çš„ç®—æ³•ã€‚è¿™ä¸ä»…æ˜¯é’ˆå¯¹è¿™é“é¢˜ï¼Œæ›´æ˜¯è§£å†³æ‰€æœ‰â€œå¤§è§„æ¨¡åŒºé—´æŸ¥è¯¢â€ç±»é—®é¢˜çš„é€šç”¨æ€ç»´æ¨¡å‹ã€‚

æˆ‘ä»¬å°†æ€ç»´è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š**å‡ ä½•ç›´è§‚åŒ–** $\rightarrow$ **æ•°å­¦å…¬å¼åŒ–** $\rightarrow$ **æ•°æ®ç»“æ„åŠ é€Ÿ**ã€‚

------

### ç¬¬ä¸€é˜¶æ®µï¼šå‡ ä½•ç›´è§‚åŒ–ï¼ˆçœ‹é€æœ¬è´¨ï¼‰

é¦–å…ˆï¼Œå¿˜æ‰ä»£ç ï¼Œæˆ‘ä»¬åœ¨è„‘æµ·é‡Œç”»å›¾ã€‚

\1. é¢˜ç›®åˆ°åº•åœ¨é—®ä»€ä¹ˆï¼Ÿ

å‰ä»–æœ‰ $n$ æ ¹å¼¦ï¼Œæ¯æ ¹å¼¦çš„èµ·å§‹éŸ³ç¬¦æ˜¯ $S_i$ã€‚

ä¸ç®¡ä½ æŸ¥è¯¢çš„åŒºé—´ $[l, r]$ æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªåŒºé—´çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬è®¾å®½åº¦ä¸º $W = r - l + 1$ã€‚

è¿™æ„å‘³ç€ï¼šæ¯æ ¹å¼¦éƒ½ä¼šäº§ç”Ÿä¸€æ¡é•¿åº¦ä¸º $W$ çš„çº¿æ®µï¼Œè¦†ç›–èŒƒå›´æ˜¯ $[S_i, S_i + W - 1]$ã€‚

\2. çº¿æ®µçš„åˆå¹¶ï¼ˆå¹¶é›†ï¼‰

æˆ‘ä»¬è¦ç®—å‡ºè¿™äº›çº¿æ®µåŠ èµ·æ¥æ€»å…±è¦†ç›–äº†å¤šå°‘ä¸ªæ•´æ•°ç‚¹ã€‚

è¿™å°±å¥½æ¯”åœ¨æ•°è½´ä¸Šé“ºåœ°æ¯¯ï¼š

- å¦‚æœä¸¤å—åœ°æ¯¯ç¦»å¾—å¾ˆè¿œï¼Œæ€»è¦†ç›–é•¿åº¦ = åœ°æ¯¯Aé•¿ + åœ°æ¯¯Bé•¿ã€‚
- å¦‚æœä¸¤å—åœ°æ¯¯é‡å äº†ï¼Œæ€»è¦†ç›–é•¿åº¦ < ä¸¤å—ä¹‹å’Œã€‚

\3. å…³é”®è§‚å¯Ÿï¼šé—´è·ï¼ˆGapï¼‰å†³å®šä¸€åˆ‡

å‡è®¾æˆ‘ä»¬å°†èµ·å§‹éŸ³ç¬¦ä»å°åˆ°å¤§æ’å¥½åºï¼š$S_1, S_2, S_3 \dots$

çœ‹ç›¸é‚»çš„ä¸¤æ ¹å¼¦ $S_i$ å’Œ $S_{i+1}$ï¼Œå®ƒä»¬ä¹‹é—´çš„ç©ºéš™ï¼ˆé—´è·ï¼‰æ˜¯ $d = S_{i+1} - S_i$ã€‚

- æƒ…å†µ Aï¼ˆé‡å /æ¥å£¤ï¼‰ï¼š

  å¦‚æœé—´è· $d \le W$ï¼ˆçº¿æ®µé•¿åº¦ï¼‰ï¼Œè¯´æ˜å‰ä¸€æ¡çº¿æ®µè¿˜æ²¡ç»“æŸï¼Œåä¸€æ¡å°±å¼€å§‹äº†ã€‚

  é‚£ä¹ˆï¼Œç›¸å¯¹äºå‰ä¸€æ¡çº¿æ®µï¼Œåä¸€æ¡çº¿æ®µåªè´¡çŒ®äº† $d$ è¿™ä¹ˆå¤šæ–°é•¿åº¦ã€‚

- æƒ…å†µ Bï¼ˆåˆ†ç¦»ï¼‰ï¼š

  å¦‚æœé—´è· $d > W$ï¼Œè¯´æ˜å‰ä¸€æ¡çº¿æ®µç»“æŸäº†ï¼Œä¸­é—´æ–­å¼€äº†ã€‚

  é‚£ä¹ˆï¼Œåä¸€æ¡çº¿æ®µæ˜¯å…¨æ–°çš„ï¼Œå®ƒè´¡çŒ®äº†å®Œæ•´çš„ $W$ è¿™ä¹ˆå¤šé•¿åº¦ã€‚

------

### ç¬¬äºŒé˜¶æ®µï¼šæ•°å­¦å…¬å¼åŒ–ï¼ˆå¯»æ‰¾è§„å¾‹ï¼‰

åŸºäºä¸Šé¢çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªé€šç”¨çš„è®¡ç®—å…¬å¼ã€‚

å‡è®¾æ’åºåçš„èµ·å§‹éŸ³ç¬¦æ˜¯ $S_1, S_2, \dots, S_n$ã€‚

æˆ‘ä»¬éœ€è¦è®¡ç®—ç›¸é‚»çš„é—´è·é›†åˆ Gaps = $\{S_2-S_1, S_3-S_2, \dots\}$ã€‚

å¯¹äºä»»æ„ä¸€æ¬¡è¯¢é—®ï¼ˆå®½åº¦ä¸º $W$ï¼‰ï¼Œæ€»è¦†ç›–é•¿åº¦ $Ans$ ç­‰äºï¼š

$$
Ans = W + \sum_{æ‰€æœ‰é—´è· d} \min(d, W)â€‹
$$

- è§£é‡Šï¼šç¬¬ä¸€ä¸ªçº¿æ®µæä¾›äº†åŸºç¡€é•¿åº¦ $W$ï¼Œåé¢æ¯ä¸€ä¸ªçº¿æ®µï¼Œè¦ä¹ˆè´¡çŒ®é—´è· $d$ï¼ˆå¦‚æœé‡å ï¼‰ï¼Œè¦ä¹ˆè´¡çŒ® $W$ï¼ˆå¦‚æœåˆ†ç¦»ï¼‰ã€‚è¿™å°±æ˜¯ä½ ä»£ç é‡Œ `if...else` çš„æ•°å­¦è¡¨è¾¾ã€‚

ç›®å‰çš„ç“¶é¢ˆï¼š

ä½ çš„åŸä»£ç å°±æ˜¯æŠŠè¿™ä¸ªå…¬å¼ç¿»è¯‘äº†ä¸€éã€‚

ä½†æ˜¯ï¼Œæ¯æ¬¡è¯¢é—®ä½ éƒ½è¦éå†æ‰€æœ‰çš„ $d$ã€‚

å¦‚æœæœ‰ $10^5$ ä¸ªé—´è·ï¼Œè¯¢é—® $10^5$ æ¬¡ï¼Œè®¡ç®—é‡å°±æ˜¯ $10^{10}$ã€‚è¿™å¤ªæ…¢äº†ã€‚

------

### ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®ç»“æ„åŠ é€Ÿï¼ˆç®—æ³•è·ƒè¿ï¼‰

æˆ‘ä»¬è¦åŠ é€Ÿè®¡ç®— $\sum \min(d, W)$ã€‚

æ—¢ç„¶ $W$ æ¯æ¬¡éƒ½åœ¨å˜ï¼Œæˆ‘ä»¬æ€ä¹ˆèƒ½ä¸éå†æ•°ç»„å°±ç®—å‡ºç­”æ¡ˆå‘¢ï¼Ÿ

æ€ç»´çªç ´ç‚¹ï¼šåˆ†ç±»è®¨è®º

æˆ‘ä»¬å°†æ‰€æœ‰çš„é—´è· $d$ åˆ†ä¸ºä¸¤ç±»ï¼š

1. **å°é—´è·ç»„**ï¼šæ‰€æœ‰ $\le W$ çš„é—´è·ã€‚å¯¹äºè¿™äº›ï¼Œæˆ‘ä»¬è¦ç´¯åŠ å®ƒä»¬çš„å€¼ã€‚
2. **å¤§é—´è·ç»„**ï¼šæ‰€æœ‰ $> W$ çš„é—´è·ã€‚å¯¹äºè¿™äº›ï¼Œæ¯ä¸€ä¸ªéƒ½ç®—ä½œ $W$ã€‚

$$
Ans = W + (\text{å°é—´è·ä¹‹å’Œ}) + (\text{å¤§é—´è·çš„æ•°é‡} \times W)â€‹
$$

**æ€ä¹ˆå¿«é€Ÿæ±‚è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Ÿ**

#### æ­¥éª¤ 1ï¼šæ’åº (Sorting)

åŸæ¥çš„é—´è·æ•°ç»„æ˜¯ä¹±åºçš„ï¼ˆæ¯”å¦‚ [2, 100, 5, 8]ï¼‰ã€‚

ä¸ºäº†å¿«é€ŸåŒºåˆ†â€œå°â€å’Œâ€œå¤§â€ï¼Œæˆ‘ä»¬å…ˆæŠŠé—´è·æ•°ç»„æ’å¥½åºï¼ˆæ¯”å¦‚ [2, 5, 8, 100]ï¼‰ã€‚

- ä¸€æ—¦æ’å¥½åºï¼Œæˆ‘ä»¬åªè¦æ‰¾åˆ°ä¸€ä¸ª**åˆ†ç•Œç‚¹**ï¼Œå·¦è¾¹å…¨æ˜¯å°çš„ï¼Œå³è¾¹å…¨æ˜¯å¤§çš„ã€‚

#### æ­¥éª¤ 2ï¼šäºŒåˆ†æŸ¥æ‰¾ (Binary Search)

å¯¹äºç»™å®šçš„ $W$ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ’åºåçš„æ•°ç»„é‡Œæ‰¾åˆ°é‚£ä¸ªåˆ†ç•Œç‚¹ã€‚

æ¯”å¦‚ gaps = [1, 2, 4, 10, 20]ï¼Œè¯¢é—® $W=5$ã€‚

äººçœ¼ä¸€çœ¼å°±èƒ½çœ‹å‡ºåˆ†ç•Œçº¿åœ¨ 4 å’Œ 10 ä¹‹é—´ã€‚è®¡ç®—æœºç”¨ äºŒåˆ†æŸ¥æ‰¾ (bisect) å¯ä»¥åœ¨æçŸ­æ—¶é—´ï¼ˆ$O(\log N)$ï¼‰å†…æ‰¾åˆ°è¿™ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ indexï¼‰ã€‚

- **å·¦è¾¹ï¼ˆå°é—´è·ç»„ï¼‰ï¼š** `[1, 2, 4]`
- **å³è¾¹ï¼ˆå¤§é—´è·ç»„ï¼‰ï¼š** `[10, 20]`

#### æ­¥éª¤ 3ï¼šå‰ç¼€å’Œ (Prefix Sum)

ç°åœ¨çš„éš¾ç‚¹æ˜¯ï¼šæ‰¾åˆ°åˆ†ç•Œç‚¹åï¼Œå·¦è¾¹é‚£å †æ•°å­— `[1, 2, 4]` æ€ä¹ˆå¿«é€Ÿæ±‚å’Œï¼Ÿå¦‚æœè¿™ä¸€å †æœ‰å‡ ä¸‡ä¸ªæ•°å­—ï¼Œä¸€ä¸ªä¸ªåŠ è¿˜æ˜¯æ…¢ã€‚

æˆ‘ä»¬è¦ç”¨åˆ°**å‰ç¼€å’Œ**æŠ€æœ¯ã€‚æˆ‘ä»¬åœ¨é¢„å¤„ç†é˜¶æ®µï¼ˆè¿˜æ²¡å¼€å§‹è¯¢é—®æ—¶ï¼‰ï¼Œå°±è®¡ç®—å¥½ä¸€ä¸ªæ•°ç»„ `P`ï¼š

- `P[0] = 0`
- `P[1] = gaps[0]`
- `P[2] = gaps[0] + gaps[1]`
- ...
- `P[k] = gapsçš„å‰ké¡¹å’Œ`

è¿™æ ·ï¼Œä¸ç®¡åˆ†ç•Œç‚¹ `index` åœ¨å“ªé‡Œï¼Œâ€œå·¦è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œâ€å°±æ˜¯ç›´æ¥æŸ¥è¡¨ `prefix_sum[index]`ã€‚è¿™æ˜¯ $O(1)$ çš„ç¬é—´æ“ä½œï¼

## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;

// ä½¿ç”¨ long long æ›¿ä»£ intï¼Œé˜²æ­¢ 10^18 æº¢å‡º
using ll = long long;


int main()
{
    // 1. å…³é—­åŒæ­¥æµï¼ŒåŠ é€Ÿè¾“å…¥è¾“å‡º (Fast I/O)
    // åº”å¯¹ 10^5 è§„æ¨¡çš„æ•°æ®ï¼Œè¿™è¡Œä»£ç æ˜¯ C++ ç«èµ›é€‰æ‰‹çš„æ ‡é…
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n;

    vector<ll> notes(n);
    for (int i = 0; i < n; ++i)
    {
        cin >> notes[i];
    }

    // 2. æ’åºå¹¶å»é‡
    // sort: O(N log N)
    sort(notes.begin(), notes.end());
    // unique: å°†é‡å¤å…ƒç´ ç§»åˆ°æœ«å°¾ï¼Œè¿”å›æ–°ç»“å°¾çš„è¿­ä»£å™¨
    auto last = unique(notes.begin(), notes.end());
    // erase: çœŸæ­£åˆ é™¤åé¢çš„é‡å¤å…ƒç´ 
    notes.erase(last, notes.end());

    // å¦‚æœå»é‡ååªå‰© 1 ä¸ªéŸ³ç¬¦ï¼Œé—´è·åˆ—è¡¨ä¸ºç©º
    // ä¸ºäº†ä»£ç é€šç”¨æ€§ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”Ÿæˆ gapsï¼Œåªæ˜¯å®ƒæ˜¯ç©ºçš„

    // 3. è®¡ç®—é—´è· (Gaps)
    int m = notes.size();
    vector<ll> gaps;
    if (m > 1)
    {
        gaps.reserve(m - 1); // é¢„åˆ†é…å†…å­˜ä¼˜åŒ–
        for (int i = 0; i < m - 1; ++i)
        {
            gaps.push_back(notes[i + 1] - notes[i]);
        }
    }

    // 4. å¯¹é—´è·æ’åºï¼Œä¸ºäºŒåˆ†åšå‡†å¤‡
    sort(gaps.begin(), gaps.end());

    // 5. è®¡ç®—å‰ç¼€å’Œ
    // pref[i] è¡¨ç¤º gaps ä¸­å‰ i ä¸ªå…ƒç´ çš„å’Œ
    // æˆ‘ä»¬å¤šå¼€ä¸€ä¸ªç©ºé—´ pref[0] = 0ï¼Œæ–¹ä¾¿è®¡ç®—
    vector<ll> pref(gaps.size() + 1, 0);
    // partial_sum æ˜¯ numeric åº“çš„ç¥å™¨ï¼Œè‡ªåŠ¨è®¡ç®—å‰ç¼€å’Œ
    partial_sum(gaps.begin(), gaps.end(), pref.begin() + 1);

    int q;
    cin >> q;

    // 6. å¤„ç†è¯¢é—®
    for (int i = 0; i < q; ++i)
    {
        ll l, r;
        cin >> l >> r;
        ll w = r - l + 1; // åŒºé—´å®½åº¦

        // æ ¸å¿ƒå…¬å¼: Ans = W + sum(min(gap, W))
        // ä¹Ÿå°±æ˜¯: Base_W + (<=W çš„é—´è·ä¹‹å’Œ) + (>W çš„é—´è·ä¸ªæ•° * W)

        // ä½¿ç”¨ upper_bound æŸ¥æ‰¾ç¬¬ä¸€ä¸ª å¤§äº W çš„ä½ç½®
        // é‚£ä¹ˆåœ¨è¿™ä¸ªä½ç½®å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½ <= W
        auto it = upper_bound(gaps.begin(), gaps.end(), w);

        // è®¡ç®—ä¸‹æ ‡ (ä¹Ÿå°±æ˜¯ <= W çš„å…ƒç´ ä¸ªæ•°)
        int idx = it - gaps.begin();

        // å°é—´è·ä¹‹å’Œ (ç›´æ¥æŸ¥å‰ç¼€å’Œè¡¨)
        ll sum_small = pref[idx];

        // å¤§é—´è·å¸¦æ¥çš„è´¡çŒ® (å‰©ä¸‹çš„ä¸ªæ•° * å½“å‰å®½åº¦)
        ll count_large = gaps.size() - idx;
        ll contribution_large = count_large * w;

        // æœ€ç»ˆç­”æ¡ˆ
        ll ans = w + sum_small + contribution_large;

        cout << ans << (i == q - 1 ? "" : " ");
    }

    cout << endl;

    return 0;
}
```

#### å…³é”®åº“å‡½æ•°è¯¦è§£

1. **`unique` + `erase` æƒ¯ç”¨æ³•**ï¼š

   - `std::unique` å¹¶ä¸ä¼šçœŸçš„ç¼©çŸ­æ•°ç»„ï¼Œå®ƒåªæ˜¯æŠŠä¸é‡å¤çš„å…ƒç´ ç§»åˆ°å‰é¢ï¼ŒæŠŠé‡å¤çš„â€œåƒåœ¾â€æ‰”åˆ°åé¢ï¼Œç„¶åè¿”å›ä¸€ä¸ªç•Œé™ã€‚æˆ‘ä»¬éœ€è¦é…åˆ `erase` æŠŠåé¢çš„åƒåœ¾åˆ æ‰ã€‚
   - è¿™æ¯” Python çš„ `list(set())` æ›´å¿«ä¸”çœå†…å­˜ï¼Œå› ä¸ºå®ƒæ˜¯åŸåœ°æ“ä½œã€‚

2. **`std::partial_sum`**ï¼š

   - `partial_sum(source_begin, source_end, dest_begin)`ã€‚
   - å®ƒè‡ªåŠ¨æ‰§è¡Œ `dest[i] = dest[i-1] + source[i]` çš„æ“ä½œï¼Œéå¸¸ä¼˜é›…ã€‚

3. **`std::upper_bound`**ï¼š

   - äºŒåˆ†æŸ¥æ‰¾çš„å˜ç§ã€‚

   - `lower_bound(..., val)`ï¼šæ‰¾ç¬¬ä¸€ä¸ª $\ge val$ çš„ã€‚

   - `upper_bound(..., val)`ï¼šæ‰¾ç¬¬ä¸€ä¸ª $> val$ çš„ã€‚

   - ä¸ºä»€ä¹ˆè¿™é‡Œç”¨ upper?

     å› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯æ‰€æœ‰ $\le W$ çš„é—´è·æ¥æ±‚å’Œã€‚upper_bound æ‰¾åˆ°çš„ä½ç½®åˆšå¥½å°±æ˜¯ $\le W$ å’Œ $> W$ çš„åˆ†ç•Œçº¿ï¼Œå®ƒçš„ä¸‹æ ‡ idx æ°å¥½å°±æ˜¯ $\le W$ çš„å…ƒç´ ä¸ªæ•°ã€‚









# 10. Just Sort - åŒé‡è®°å½•

## æ€è·¯

å­˜ä¸€ä¸ªæ²¡æœ‰0çš„a

ä¸€ä¸ªæœ‰0çš„a

ä½¿ç”¨å†…å­˜é¢„åˆ†é…ï¼Œå¿…é¡»æ­é…push_backä½¿ç”¨ï¼Œä¸èƒ½ç”¨ç´¢å¼•ï¼ï¼ï¼

å¦‚æœå·²ç»ç¡®å®šé•¿åº¦ï¼Œä½¿ç”¨resize

## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;


int main()
{

    // 1. I/O åŠ é€Ÿ (å¿…é¡»)
    ios::sync_with_stdio(false);
    cin.tie(0);

    int N, M;
    if (!(cin >> N >> M))
        return 0;

    // 2. å†…å­˜é¢„åˆ†é…
    vector<int> a;
    a.reserve(N);
    vector<int> b;
    b.reserve(M);

    // æˆ‘ä»¬å¤ç”¨ pattern æ•°ç»„ï¼Œç”¨æ¥è®°å½•å“ªäº›ä½ç½®åŸæœ¬æ˜¯0
    // ä¸ºäº†çœç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å­˜å…·ä½“çš„é0å€¼ï¼Œåªå­˜çŠ¶æ€ã€‚
    // ä½†ä¸ºäº†ä»£ç å¥½å†™ï¼Œç›´æ¥å­˜åŸå§‹åºåˆ—å³å¯ï¼Œå†…å­˜æ¶ˆè€— O(N) æ˜¯é€ƒä¸æ‰çš„
    vector<int> pattern(N);

    for (int i = 0; i < N; i++)
    {
        cin >> pattern[i];
        if (pattern[i] != 0)
        {
            a.push_back(pattern[i]);
        }
    }

    for (int i = 0; i < M; i++)
    {
        int t;
        cin >> t;
        b.push_back(t);
    }

    // æ’åºæ˜¯ O(NlogN)ï¼Œè¿™æ­¥æ— æ³•ä¼˜åŒ–ï¼Œæ˜¯æ ¸å¿ƒé€»è¾‘
    sort(a.begin(), a.end());
    sort(b.begin(), b.end());

    int id_a = 0;
    int id_b = 0;

    for (int i = 0; i < N; i++)
    {
        if (pattern[i] == 0)
        {
            pattern[i] = b[id_b];
            id_b++;
        }
        else
        {
            pattern[i] = a[id_a];
            id_a++;
        }
    }


    bool flag = true;
    for (int i = 1; i < N; i++)
    {
        if (pattern[i] <= pattern[i - 1])
        {
            flag = false;
            break;
        }
    }
    if (flag)
    {
        bool first = true;
        for (auto x : pattern)
        {
            if (!first)
            {
                cout << " ";
            }
            cout << x;
            first = false;
        }
    }
    else
    {
        cout << -1 << endl;
    }
}
```









# 11. æ–‡ä»¶ç®¡ç†å™¨ - Mapã€Setä¸é‡è½½



## æ€è·¯

å­˜ä¸¤å¥—ç´¢å¼•ï¼Œä¸€å¥—ä»¥æ–‡ä»¶åå¤§å°ï¼Œä¸€å¥—ä»¥æ–‡ä»¶å¤§å°

é¢˜ç›®è¦æ±‚çš„æ–‡ä»¶å¤§å°æ˜¯é™åºï¼ˆæœ€å¤§åˆ°ç¬¬kå¤§ï¼‰ï¼Œæ–‡ä»¶åæ˜¯å‡åºï¼ˆæœ€å°åˆ°ç¬¬kå°ï¼‰

**æ–‡ä»¶å¤§å°ä½¿ç”¨set**

æ–‡ä»¶å¤§å°æœªå¿…å”¯ä¸€ï¼Œæ•…è€Œä¸èƒ½ä½¿ç”¨map

ä½¿ç”¨set + ç»“æ„ä½“åˆ™å¯ä»¥é¿å…

seté»˜è®¤æ˜¯ä¼˜å…ˆå–å°çš„ï¼Œæˆ‘ä»¬å¯ä»¥é‡è½½è¿ç®—ç¬¦<æ¥å®šä¹‰æ’åº

```cpp
bool operator<(const FileNode &other) const //è¿™ä¸ªconstç”¨æ¥æŒ‡å‘è‡ªèº«ï¼ˆthisæŒ‡é’ˆï¼‰
```

**æ–‡ä»¶åä½¿ç”¨map**

æ–‡ä»¶åæ˜¯å”¯ä¸€çš„ï¼Œä½œä¸ºmapçš„keyï¼Œmapä¼šé»˜è®¤æŠŠå°çš„keyæ”¾åœ¨å‰é¢

## Setçš„ä¼˜å…ˆå°æ€§

| **ç‰¹æ€§**                | **std::set**                     | **std::priority_queue**                   |
| ----------------------- | -------------------------------- | ----------------------------------------- |
| **åº•å±‚ç»“æ„**            | çº¢é»‘æ ‘ (BST)                     | å † (Heap)                                 |
| **è®¿é—®æ–¹å¼**            | `begin()` (è¿­ä»£å™¨)               | `top()` (å †é¡¶å¼•ç”¨)                        |
| **æ¯”è¾ƒå™¨ `less` (`<`)** | `return a < b;`                  | `return a < b;`                           |
| **å«ä¹‰**                | å¦‚æœ Trueï¼Œ`a` æ’åœ¨ `b` **å·¦è¾¹** | å¦‚æœ Trueï¼Œ`b` æ²‰åœ¨ `a` **ä¸Šé¢** (b èµ¢äº†) |
| **å–å‡ºé¡ºåº**            | 1, 2, 5 (ä»å°åˆ°å¤§)               | **5**, 2, 1 (ä»å¤§åˆ°å°)                    |
| **ç›´è§‚æ„Ÿå—**            | **ç”±å°åˆ°å¤§**                     | **ç”±å¤§åˆ°å°**                              |

### ä¸ºä»€ä¹ˆè®¾è®¡æˆè¿™æ ·ï¼Ÿï¼ˆåº•å±‚é€»è¾‘ï¼‰

C++ STL çš„è®¾è®¡å“²å­¦æ˜¯éµå¾ªæ•°å­¦ä¸Šçš„â€œä¸¥æ ¼å¼±åºï¼ˆStrict Weak Orderingï¼‰â€ã€‚

- å¯¹äº set / sortï¼š

  äººç±»è‡ªç„¶çš„é˜…è¯»é¡ºåºæ˜¯ä»å·¦åˆ°å³ï¼Œæ•°å­—æ˜¯ä»å°åˆ°å¤§ã€‚æ‰€ä»¥ less æ„å‘³ç€ $1 < 2$ï¼Œ1 åœ¨å‰ï¼Œ2 åœ¨åï¼Œè¿™ç¬¦åˆç›´è§‰ã€‚

- å¯¹äº priority_queueï¼š

  å®ƒçš„åå­—å«â€œä¼˜å…ˆâ€é˜Ÿåˆ—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¡ç®—æœºè®¤ä¸ºæ•°å€¼è¶Šå¤§ï¼Œæƒé‡ï¼ˆPriorityï¼‰è¶Šé«˜ã€‚

  - æ¯”è¾ƒ `1` å’Œ `5`ã€‚
  - å› ä¸º `1 < 5` ä¸º Trueã€‚
  - æ—¢ç„¶ `5` æ›´åŠ â€œå¤§â€ï¼Œé‚£ä¹ˆ `5` çš„**ä¼˜å…ˆçº§**å°±æ›´é«˜ã€‚
  - æ‰€ä»¥ `5` ä¼šè¢«æ”¾åœ¨å †é¡¶ã€‚

### æ€ä¹ˆè®°å¿†æœ€ç®€å•ï¼Ÿ

#### è®°å¿†å£è¯€ï¼š

1. **å¯¹äº `set` / `vector` æ’åº**ï¼š
   - æƒ³ä»å°åˆ°å¤§ï¼ˆå‡åºï¼‰ï¼šç”¨ `<` (é»˜è®¤)
   - æƒ³ä»å¤§åˆ°å°ï¼ˆé™åºï¼‰ï¼šç”¨ `>`
2. **å¯¹äº `priority_queue` (å®Œå…¨åç€æ¥)**ï¼š
   - æƒ³è¦**å¤§**é¡¶å †ï¼ˆå¤§çš„åœ¨å…ˆï¼‰ï¼šç”¨ `<` (é»˜è®¤)
   - æƒ³è¦**å°**é¡¶å †ï¼ˆå°çš„åœ¨å…ˆï¼‰ï¼šç”¨ `>`



## ä»£ç 



```cpp
#include <bits/stdc++.h>
using namespace std;

// å®šä¹‰ç”¨äº set æ’åºçš„ç»“æ„ä½“
struct FileNode
{
    int name;
    int size;

    // é‡è½½ < è¿ç®—ç¬¦ä»¥æ»¡è¶³ Op 3 çš„æ’åºéœ€æ±‚
    // è§„åˆ™ï¼šå¤§å°æœ€å¤§(é™åº) -> æ–‡ä»¶åæ•°å­—å¤§å°æœ€å°(å‡åº)
    bool operator<(const FileNode &other) const //è¿™ä¸ªconstç”¨æ¥æŒ‡å‘è‡ªèº«ï¼ˆthisæŒ‡é’ˆï¼‰
    {
        if (size != other.size)
        {
            // å¤§å°ä¸åŒï¼Œå¤§çš„åœ¨å‰ (åœ¨ set ä¸­å®ç°é™åºéœ€è¦åç€å†™å—ï¼Ÿä¸ï¼Œseté»˜è®¤å‡åºã€‚ä¸ºäº†è®©begin()æ˜¯æœ€å¤§çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ > )
            // ä¿®æ­£ï¼šset é»˜è®¤æ˜¯ less<T>ï¼Œå³ä»å°åˆ°å¤§ã€‚
            // æˆ‘ä»¬å¸Œæœ›éå† begin() æ‹¿åˆ°çš„æ˜¯â€œæœ€å¤§çš„å¤§å°â€ã€‚
            // æ‰€ä»¥å½“ this->size > other.size æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ› this æ’åœ¨ other å‰é¢ (å³ this < other ä¸º true é€»è¾‘ä¸Šæ˜¯â€œæ›´ä¼˜â€)
            // ä½†æ ‡å‡† set é€»è¾‘æ˜¯ï¼šå¦‚æœ A < B ä¸º trueï¼Œåˆ™ A æ’åœ¨ B å‰é¢ã€‚
            // æˆ‘ä»¬æƒ³è¦ï¼šSize å¤§çš„æ’å‰é¢ã€‚æ‰€ä»¥å½“ Size å¤§æ—¶ï¼Œåº”è¯¥è¢«è§†ä¸ºâ€œæ›´å°/æ›´ä¼˜å…ˆâ€ã€‚
            // æˆ–è€…æ›´ç®€å•çš„é€»è¾‘ï¼š
            // æˆ‘ä»¬ç›´æ¥æ­£å¸¸æ¯”è¾ƒã€‚å¦‚æœæƒ³è¦ä»å¤§åˆ°å°ï¼Œéå†çš„æ—¶å€™å…¶å® set é»˜è®¤æ˜¯ä»å°åˆ°å¤§ã€‚
            // è®©æˆ‘ä»¬è°ƒæ•´é€»è¾‘ï¼šSize è¶Šå¤§ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒè¶Š "å°" (åœ¨æ’åºæ ‘çš„å·¦è¾¹)ï¼Œè¿™æ · begin() å°±æ˜¯æœ€å¤§çš„ Sizeã€‚
            return size > other.size; // Trueçš„è¯A this ä¼˜å…ˆï¼Œ Falseçš„è¯otherä¼˜å…ˆ
        }
        // å¦‚æœå¤§å°ç›¸åŒï¼Œæ–‡ä»¶åæ•°å­—è¶Šå°è¶Šé å‰
        return name < other.name;
    }
};

// æ–‡ä»¶å¤¹ç»“æ„ï¼ŒåŒ…å«ä¸¤å¥—ç´¢å¼•
struct Folder
{
    // Key: name, Value: size
    // map é»˜è®¤æŒ‰ key (name) å‡åºæ’åˆ—ï¼Œå®Œç¾ç¬¦åˆ Op 4
    map<int, int> nameMap;

    // å­˜å‚¨ FileNodeï¼ŒæŒ‰æˆ‘ä»¬é‡è½½çš„é€»è¾‘æ’åºï¼Œç¬¦åˆ Op 3
    set<FileNode> sizeSet;
};

Folder folders[6]; // é¢˜ç›®ä¿è¯ folder 1-5

int main()
{
    // I/O åŠ é€Ÿ
    ios::sync_with_stdio(false);
    cin.tie(0);

    int Q;
    if (!(cin >> Q))
        return 0;

    while (Q--)
    {
        int op;
        cin >> op;

        if (op == 1)
        {
            // æ·»åŠ /æ›´æ–°æ–‡ä»¶
            int f, name, size;
            cin >> f >> name >> size;

            // æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å…ˆåˆ é™¤æ—§çš„
            if (folders[f].nameMap.count(name))
            {
                int oldSize = folders[f].nameMap[name];
                // ä» sizeSet ä¸­ç§»é™¤æ—§è®°å½•
                folders[f].sizeSet.erase({name, oldSize});
            }

            // æ›´æ–°/æ’å…¥
            folders[f].nameMap[name] = size;
            folders[f].sizeSet.insert({name, size});
        }
        else if (op == 2)
        {
            // åˆ é™¤æ–‡ä»¶
            int f, name;
            cin >> f >> name;

            if (folders[f].nameMap.count(name))
            {
                int size = folders[f].nameMap[name];
                // ç§»é™¤
                folders[f].sizeSet.erase({name, size});
                folders[f].nameMap.erase(name);
            }
            // å¦‚æœä¸å­˜åœ¨ï¼Œä»€ä¹ˆéƒ½ä¸åš
        }
        else if (op == 3)
        {
            // æŒ‰å¤§å°è¾“å‡º Top K
            int f, k;
            cin >> f >> k;

            // å¦‚æœæ–‡ä»¶å¤¹ä¸ºç©ºæˆ–ä¸å­˜åœ¨ï¼Œè¾“å‡ºç©ºè¡Œ (åœ¨é€»è¾‘æœ«å°¾ç»Ÿä¸€æ¢è¡Œ)
            int count = 0;
            for (auto it = folders[f].sizeSet.begin(); it != folders[f].sizeSet.end() && count < k; ++it)
            {
                if (count > 0)
                    cout << " ";
                cout << it->name;
                count++;
            }
            cout << "\n";
        }
        else if (op == 4)
        {
            // æŒ‰æ–‡ä»¶åè¾“å‡º Top K (æœ€å°çš„ k ä¸ª)
            int f, k;
            cin >> f >> k;

            int count = 0;
            // map å·²ç»æŒ‰ name å‡åºæ’å¥½äº†
            for (auto it = folders[f].nameMap.begin(); it != folders[f].nameMap.end() && count < k; ++it)
            {
                if (count > 0)
                    cout << " ";
                cout << it->first; // first æ˜¯ name
                count++;
            }
            cout << "\n";
        }
    }

    return 0;
}

```



# 12. é¼¹é¼ æŠ¥æ•° - äºŒå‰æ ‘

## æ€è·¯

ä¹‹æ‰€ä»¥**é€†åºæ’å…¥**æ˜¯å¯¹çš„ï¼ŒåŸå› ä¸»è¦ç”±ä¸¤ç‚¹ç»“åˆè€Œæˆï¼š

1. **ååºéå†çš„ç‰¹æ€§**ï¼š`å·¦ -> å³ -> æ ¹`ã€‚
2. **BST çš„æ„é€ ç‰¹æ€§**ï¼šçˆ¶èŠ‚ç‚¹å¿…é¡»å…ˆäºå­èŠ‚ç‚¹å­˜åœ¨ï¼Œä¸”æ•°å€¼å†³å®šä½ç½®ã€‚

è®©æˆ‘æŠŠå®ƒæ‹†è§£å¼€ï¼Œä½ å°±å®Œå…¨æ˜ç™½äº†ã€‚

### 1. è°æ˜¯è€å¤§ï¼Ÿï¼ˆæ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼‰

ååºéå† (Post-order) çš„è§„åˆ™æ˜¯ï¼šå…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œæœ€åéå†æ ¹èŠ‚ç‚¹ã€‚

åºåˆ—ï¼š[ ......å·¦å­æ ‘...... ] [ ......å³å­æ ‘...... ] æ ¹

å¦‚æœä½ é€†åºè¯»å–è¿™ä¸ªæ•°ç»„ï¼Œé¡ºåºå°±å˜æˆäº†ï¼š

æ ¹ -> [ ......å³å­æ ‘...... ] -> [ ......å·¦å­æ ‘...... ]

å…³é”®ç‚¹æ¥äº†ï¼š

å½“ä½ é€†åºè¯»å–æ—¶ï¼Œä½ æ‹¿åˆ°çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œä¸€å®šæ˜¯æ•´æ£µæ ‘çš„æ ¹ (Root)ã€‚

### 2. ä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥æ’å…¥ï¼Ÿï¼ˆBST çš„è‡ªåŠ¨å½’ä½ï¼‰

åœ¨æ™®é€šäºŒå‰æ ‘ä¸­ï¼Œå…‰çŸ¥é“æ ¹æ˜¯è°æ²¡ç”¨ï¼Œä½ ä¸çŸ¥é“å‰©ä¸‹çš„æ•°å“ªäº›å±äºå·¦è¾¹ï¼Œå“ªäº›å±äºå³è¾¹ã€‚

ä½†åœ¨äºŒå‰æœç´¢æ ‘ (BST) ä¸­ï¼Œæ•°å€¼å†³å®šäº†ä¸€åˆ‡ã€‚

å½“æˆ‘ä»¬æ‹¿åˆ°**æ ¹**å¹¶æ’å…¥åï¼Œæ¥ä¸‹æ¥é‡åˆ°çš„æ•°ï¼š

- å¦‚æœæ˜¯**å³å­æ ‘**çš„æ ¹ï¼šå®ƒä¸€å®šæ¯”å½“å‰æ ¹å¤§ï¼Œæ’å…¥æ—¶ä¼šè‡ªåŠ¨æ»‘å‘å³è¾¹ã€‚
- å¦‚æœæ˜¯**å·¦å­æ ‘**çš„æ ¹ï¼šå®ƒä¸€å®šæ¯”å½“å‰æ ¹å°ï¼Œæ’å…¥æ—¶ä¼šè‡ªåŠ¨æ»‘å‘å·¦è¾¹ã€‚

åªè¦ä¿è¯ **â€œåœ¨æ’å…¥å­èŠ‚ç‚¹ä¹‹å‰ï¼Œçˆ¶èŠ‚ç‚¹å·²ç»å­˜åœ¨â€**ï¼ŒBST çš„æ’å…¥é€»è¾‘å°±èƒ½æŠŠå®ƒä»¬é€åˆ°æ­£ç¡®çš„ä½ç½®ã€‚

**é€†åºååºéå†**ï¼ˆæ ¹ -> å³ -> å·¦ï¼‰æ°å¥½æ»¡è¶³äº†è¿™ä¸ªæ¡ä»¶ï¼š**æ ¹èŠ‚ç‚¹æ€»æ˜¯æ¯”å®ƒçš„å·¦å³å­©å­å…ˆå‡ºç°ã€‚**

### æ€»ç»“

å¹¶ä¸æ˜¯æ‰€æœ‰æ ‘éƒ½èƒ½è¿™æ ·è¿˜åŸã€‚

- **å¦‚æœæ˜¯æ™®é€šäºŒå‰æ ‘**ï¼šç»™ä½ ååºåºåˆ— `2 4 7 5 3`ï¼Œä½ æ ¹æœ¬è¿˜åŸä¸å‡ºæ¥ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ 3 çš„å·¦è¾¹æ˜¯è°ï¼Œå³è¾¹æ˜¯è°ã€‚
- **å› ä¸ºæ˜¯ BST**ï¼šä½ åªéœ€è¦æŒ‰**â€œæ ¹ -> å­©å­â€**çš„é¡ºåºæŠŠæ•°å­—æ‰”è¿›å»ï¼Œ**å¤§å°å…³ç³»**ä¼šè‡ªåŠ¨å¸®ä½ æŠŠå®ƒä»¬åˆ†é…åˆ°å·¦è¾¹æˆ–å³è¾¹ã€‚

ä½ åšçš„é€†åºæ“ä½œï¼Œå®é™…ä¸Šæ˜¯æŠŠ â€œå·¦->å³->æ ¹â€ (è‡ªåº•å‘ä¸Š) å˜æˆäº† â€œæ ¹->å³->å·¦â€ (è‡ªé¡¶å‘ä¸‹)ã€‚

åªè¦æ˜¯è‡ªé¡¶å‘ä¸‹å»ºç«‹ BSTï¼Œé¡ºåºæ˜¯â€œæ ¹å³å·¦â€è¿˜æ˜¯â€œæ ¹å·¦å³â€å…¶å®æ— æ‰€è°“ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ æ‰€ä»¥ä½ çš„åšæ³•å®Œå…¨æ­£ç¡®ï¼



## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;

// 1. ç»“æ„ä½“è‡ªå¸¦æ„é€ å‡½æ•°ï¼Œä»£ç æ›´æ¸…çˆ½
struct Node {
    int data;
    Node *left, *right;
    Node(int val) : data(val), left(nullptr), right(nullptr) {}
};

class Tree{

public:

    Node* root = nullptr;

    void insert(int val){
        if (root == nullptr){
            root = new Node{val};
            return;
        }else{

            insertRec(root, val);
        }
    }

    void insertRec(Node* node, int val){

        if(val < node -> data){
            if(node->left == nullptr){
                node->left = new Node{val};
                return;
            }else{
                insertRec(node->left, val);
            }
        }else{
            if(node->right == nullptr){
                node->right = new Node{val};
                return;
            }else{
                insertRec(node->right, val);
            }
        }
    }

    void out_Rec(Node *node){
        cout << node->data;

        if (node -> left != nullptr){
            cout << '<';
            out_Rec(node->left);
            cout << '>';
        }

        if (node -> right != nullptr){
            cout << '<';
            out_Rec(node->right);
            cout << '>';
        }
    }

};

int main()
{
    int N;
    cin >> N;
    Tree tree;
    vector<int> values(N);
    for (int i = 0; i < N; i++){
        int val;
        cin >> val;
        values[i] = val;
    }

    for(int i = N-1; i >= 0; i--){
        tree.insert(values[i]);
    }

    tree.out_Rec(tree.root);
    return 0;
}

```







# 13. Sins of a Solar Empire - è®¡æ•°oräº¤é›†



## æ€è·¯

### 1.è®¡æ•°

æ—¢ç„¶é¢˜ç›®è¦æ±‚èµ„æºå¿…é¡»åœ¨ **N ä¸ªæ˜Ÿçƒéƒ½å­˜åœ¨**ï¼Œæˆ‘ä»¬å¯ä»¥è½¬æ¢ä¸€ä¸‹æ€ç»´ï¼š

1. **å…¨å±€ç»Ÿè®¡**ï¼šç”¨ä¸€ä¸ªâ€œè®°è´¦æœ¬â€ï¼ˆMapï¼‰è®°å½•æ¯ä¸ªèµ„æº ID å‡ºç°çš„â€œæ˜Ÿçƒæ¬¡æ•°â€ã€‚
2. **å»é‡å…³é”®**ï¼šå› ä¸ºåŒä¸€ä¸ªæ˜Ÿçƒå†…éƒ¨å¯èƒ½é‡å¤åˆ—å‡ºæŸä¸ªèµ„æºï¼ˆå¦‚è¾“å…¥ `2 2 4`ï¼‰ï¼Œè¿™å¯¹äºè®¡æ•°æ¥è¯´åªç®—â€œè¯¥æ˜Ÿçƒæ‹¥æœ‰æ­¤èµ„æº 1 æ¬¡â€ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨å¤„ç†æ¯ä¸ªæ˜Ÿçƒæ—¶ï¼Œå¿…é¡»å…ˆå¯¹è¯¥è¡Œçš„èµ„æº**å»é‡**ã€‚
3. **æœ€ç»ˆç­›é€‰**ï¼šåªæœ‰å½“æŸä¸ªèµ„æºçš„è®¡æ•°å™¨ç­‰äº $N$ æ—¶ï¼Œå®ƒæ‰æ˜¯å…¬å…±èµ„æºã€‚

### 2.äº¤é›†

å…¶å®å°±æ˜¯å–æ‰€æœ‰æ˜Ÿçƒèµ„æºçš„äº¤é›†

ä¸ºä»€ä¹ˆâ€œäº¤é›†æ³•â€æ›´å¼ºï¼Ÿ

1. **æé€Ÿå‰ªæ (Early Exit)**ï¼š å¦‚æœåœ¨ç¬¬ 3 ä¸ªæ˜Ÿçƒæ—¶ï¼Œäº¤é›†å·²ç»ä¸ºç©ºäº†ï¼ˆæ²¡æœ‰å…¬å…±èµ„æºï¼‰ï¼Œä½ å¯ä»¥ç›´æ¥ `break`ï¼Œåé¢ 997 ä¸ªæ˜Ÿçƒçš„æ•°æ®è¯»éƒ½ä¸ç”¨è¯»ï¼ˆæˆ–è€…è¯»äº†ç›´æ¥ä¸¢å¼ƒï¼‰ï¼Œ**æ—¶é—´å¤æ‚åº¦ç¬é—´å˜æˆ O(1)**ã€‚è€Œè®¡æ•°æ³•å¿…é¡»è¯»å®Œæ‰€æœ‰æ•°æ®ã€‚
2. **çœå†…å­˜**ï¼š ä½ åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªâ€œå½“å‰å¹¸å­˜è€…åˆ—è¡¨â€ã€‚éšç€äº¤é›†æ“ä½œçš„è¿›è¡Œï¼Œè¿™ä¸ªåˆ—è¡¨é€šå¸¸ä¼šè¿…é€Ÿç¼©å°ã€‚è€Œ Map æ³•éœ€è¦å­˜å‚¨æ‰€æœ‰å‡ºç°è¿‡çš„ä¸åŒæ•°å­—ã€‚

## ä»£ç 

### è®¡æ•°

```cpp
#include <bits/stdc++.h>
using namespace std;


int main()
{
    // 1. I/O åŠ é€Ÿ (å¸¸è§„æ“ä½œï¼Œé˜²æ­¢ cin/cout è¶…æ—¶)
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N;
    if (!(cin >> N))
        return 0;

    // map: Key æ˜¯èµ„æºID, Value æ˜¯æ‹¥æœ‰è¯¥èµ„æºçš„æ˜Ÿçƒæ•°é‡
    // map å¤©ç„¶æŒ‰ Key å‡åºæ’åˆ—ï¼Œæ­£å¥½ç¬¦åˆè¾“å‡ºè¦æ±‚ï¼Œä¸”èƒ½å¤„ç† 10^9 çš„å¤§æ•´æ•° key
    map<int, int> resource_count;

    for (int i = 0; i < N; ++i)
    {
        int m;
        cin >> m;

        // ä½¿ç”¨ set åœ¨è¯»å–æ—¶ç›´æ¥å»é‡
        // è¿™ä¸€æ­¥æ˜¯å…³é”®ï¼Œé¢˜ç›®è¯´å•è¡Œè¾“å…¥ä¼šæœ‰é‡å¤æ•°æ®
        // å¦‚æœç”¨ vector å­˜ï¼Œè¿˜éœ€è¦ sort + uniqueï¼Œset ä»£ç æ›´çŸ­æ›´ä¼˜é›…
        set<int> distinct_resources;
        while (m--)
        {
            int id;
            cin >> id;
            distinct_resources.insert(id);
        }

        // éå†è¯¥æ˜Ÿçƒå»é‡åçš„èµ„æºï¼Œæ›´æ–°å…¨å±€è®¡æ•°å™¨
        for (int id : distinct_resources)
        {
            resource_count[id]++;
        }
    }

    // 2. ç­›é€‰å‡ºè®¡æ•°ç­‰äº N çš„èµ„æº
    vector<int> result;
    for (auto x : resource_count)
    {
        if (x.second == N)
        {
            result.push_back(x.first);
        }
    }

    // 3. è¾“å‡ºç»“æœ
    cout << result.size() << "\n";

    // é¢˜ç›®è¦æ±‚ï¼šSä¸ç­‰äº0æ—¶æ‰è¾“å‡ºç¬¬äºŒè¡Œ
    if (!result.empty())
    {
        for (int i = 0; i < result.size(); ++i)
        {
            // æ§åˆ¶ç©ºæ ¼æ ¼å¼ï¼šç»“å°¾æ— ç©ºæ ¼
            cout << result[i] << (i == result.size() - 1 ? "" : " ");
        }
        cout << "\n";
    }

    return 0;
}

```

### äº¤é›†

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N;

    // 1. åˆå§‹åŒ–ï¼šè¯»å–ç¬¬ä¸€ä¸ªæ˜Ÿçƒä½œä¸ºâ€œåˆå§‹äº¤é›†â€
    // ç”¨ vector å­˜ï¼Œå¿…é¡»æ’åºå»é‡ï¼ˆset_intersection çš„å‰æï¼‰
    int m;
    cin >> m;
    vector<int> result; // å­˜æ”¾å½“å‰çš„äº¤é›†ç»“æœ
    result.reserve(m);

    while (m--)
    {
        int t;
        cin >> t;
        result.push_back(t);
    }
    // æ’åºå¹¶å»é‡ (æ ‡å‡†è¿æ‹›)
    sort(result.begin(), result.end());
    result.erase(unique(result.begin(), result.end()), result.end());

    // 2. é€ä¸ªä¸åç»­æ˜Ÿçƒå–äº¤é›†
    for (int i = 1; i < N; ++i)
    {
        // å¦‚æœå½“å‰ç»“æœé›†å·²ç»ä¸ºç©ºï¼Œåé¢å°±ä¸ç”¨ç®—äº†ï¼ˆå‰ªæï¼‰
        // ä½†é¢˜ç›®è¦æ±‚å¿…é¡»è¯»å®Œè¾“å…¥æµï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ç»§ç»­è¯»æ•°æ®ï¼Œä½†ä¸å†åšè®¡ç®—
        if (result.empty())
        {
            // åªæ˜¯ä¸ºäº†æ¶ˆè€—æ‰è¾“å…¥æµï¼Œé˜²æ­¢è¯»ä¹±
            cin >> m;
            int temp_trash;
            while (m--)
                cin >> temp_trash;
            continue;
        }

        cin >> m;
        vector<int> current_planet;
        current_planet.reserve(m);
        while (m--)
        {
            int t;
            cin >> t;
            current_planet.push_back(t);
        }
        // å½“å‰æ˜Ÿçƒä¹Ÿè¦æ’åºå»é‡
        sort(current_planet.begin(), current_planet.end());
        // uniqueä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º set_intersection ä¼šå¤„ç†ï¼Œä½†ä¸ºäº†ä¸¥è°¨å¯ä»¥åŠ ä¸Š

        // 3. æ ¸å¿ƒï¼šå–äº¤é›†
        // æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸´æ—¶å®¹å™¨å­˜æ”¾æ–°ä¸€è½®çš„äº¤é›†
        vector<int> temp_intersection;
        // set_intersection(èŒƒå›´1å¼€å§‹, èŒƒå›´1ç»“æŸ, èŒƒå›´2å¼€å§‹, èŒƒå›´2ç»“æŸ, è¾“å‡ºè¿­ä»£å™¨)
        set_intersection(result.begin(), result.end(),
                         current_planet.begin(), current_planet.end(),
                         back_inserter(temp_intersection));

        // æ›´æ–°ç»“æœé›†
        result = temp_intersection;
    }

    // 4. è¾“å‡º
    cout << result.size() << "\n";
    if (!result.empty())
    {
        for (int i = 0; i < result.size(); ++i)
        {
            cout << result[i] << (i == result.size() - 1 ? "" : " ");
        }
        cout << "\n";
    }

    return 0;
}
```

##### ä»£ç æ ¸å¿ƒ

```cpp
vector<int> temp_intersection;
// set_intersection(èŒƒå›´1å¼€å§‹, èŒƒå›´1ç»“æŸ, èŒƒå›´2å¼€å§‹, èŒƒå›´2ç»“æŸ, è¾“å‡ºè¿­ä»£å™¨)
set_intersection(result.begin(), result.end(),
                    current_planet.begin(), current_planet.end(),
                    back_inserter(temp_intersection));

// æ›´æ–°ç»“æœé›†
result = temp_intersection;
```



# 14. ç‰¹æ®ŠåŒ¹é…R - æš´åŠ›orå“ˆå¸Œ



## æ€è·¯

### æš´åŠ›è§£æ³• (Brute Force):

æ‹¿ $Y$ ä¸æ‰€æœ‰ $N$ ä¸ªä¸²é€ä¸€æ¯”å¯¹ã€‚

- å¤æ‚åº¦ï¼š$O(M \times N \times L)$ã€‚
- è®¡ç®—é‡ï¼š$1000 \times 1000 \times 1000 = 10^9$ã€‚

### ä¼˜é›…è§£æ³•ï¼šæ»šåŠ¨å“ˆå¸Œ (Rolling Hash) + é‚»å±…æšä¸¾

åˆ©ç”¨å¤šé¡¹å¼å“ˆå¸Œ (Polynomial Rolling Hash)ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­—ç¬¦ä¸²æ˜ å°„ä¸ºä¸€ä¸ªæ•´æ•°ï¼ˆHashå€¼ï¼‰ã€‚

æœ€å¦™çš„åœ°æ–¹åœ¨äºï¼šå½“æˆ‘ä»¬ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„æŸä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œå¯ä»¥é€šè¿‡æ•°å­¦å…¬å¼åœ¨ $O(1)$ çš„æ—¶é—´å†…è®¡ç®—å‡ºæ–°çš„ Hash å€¼ï¼Œè€Œä¸éœ€è¦é‡æ–°æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ã€‚

- **é¢„å¤„ç†ï¼š** å°†æ‰€æœ‰æºå­—ç¬¦ä¸²çš„ Hash å€¼å­˜å…¥å“ˆå¸Œè¡¨ï¼ˆæŒ‰é•¿åº¦åˆ†ç±»å­˜å‚¨ï¼‰ã€‚
- **æŸ¥è¯¢ï¼š**
  1. ç®—å‡ºæŸ¥è¯¢ä¸² $Y$ çš„åŸå§‹ Hash å€¼ã€‚
  2. æšä¸¾æ¯ä¸€ä½ $i$ï¼Œå°è¯•å°† $Y[i]$ æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ã€‚
  3. åˆ©ç”¨å…¬å¼ $O(1)$ æ›´æ–° Hash å€¼ã€‚
  4. åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ–° Hash å€¼ã€‚
- **å¤æ‚åº¦ï¼š** $O((N+M) \times L)$ã€‚
- **è®¡ç®—é‡ï¼š** çº¦ $2 \times 10^6$ï¼Œ**æå¿«**ã€‚

## ä»£ç 

### æš´åŠ›

```cpp
#include <string.h>
#include <iostream>
using namespace std;
#define MAX_N 1005
#define MAX_L 1005

char r_table[MAX_N][MAX_L];
int r_len[MAX_N]; // é¢„å­˜æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦

int n, m;

// æ£€æŸ¥ x å’Œ y æ˜¯å¦ç¬¦åˆ R åŒ¹é…
// ä¼ å…¥ len_x é¿å…é‡å¤è®¡ç®—
int r_match(int idx, char *y, int len_y)
{
    // 1. ç›´æ¥æ¯”è¾ƒé¢„å­˜çš„é•¿åº¦
    if (r_len[idx] != len_y)
    {
        return 0;
    }

    char *x = r_table[idx];
    int diff_count = 0;

    // 2. é€ä¸ªå­—ç¬¦æ¯”è¾ƒ
    for (int i = 0; i < len_y; i++)
    {
        if (x[i] != y[i])
        {
            diff_count++;
            // ä¼˜åŒ–ï¼šåªè¦å·®å¼‚è¶…è¿‡1ï¼Œæå‰é€€å‡º
            if (diff_count > 1)
            {
                return 0;
            }
        }
    }

    return (diff_count == 1);
}

int main()
{
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    cin >> n >> m;

    for (int i = 0; i < n; i++)
    {
        cin >> r_table[i];
        r_len[i] = strlen(r_table[i]); // åªè®¡ç®—ä¸€æ¬¡é•¿åº¦
    }

    char y_query[MAX_L];

    for (int j = 0; j < m; j++)
    {
        cin >> y_query;
        int len_y = strlen(y_query); // æŸ¥è¯¢ä¸²ä¹Ÿåªç®—ä¸€æ¬¡

        int found = 0;
        for (int i = 0; i < n; i++)
        {
            // ä¼ å…¥ç´¢å¼•å’Œå½“å‰æŸ¥è¯¢ä¸²é•¿åº¦
            if (r_match(i, y_query, len_y))
            {
                found = 1;
                break;
            }
        }

        if (found)
            cout << "YES" << endl;
        else
            cout << "NO" << endl;
    }

    return 0;
}
```

### å“ˆå¸Œ

```cpp
#include <bits/stdc++.h>
using namespace std;

// ä½¿ç”¨ unsigned long long è‡ªç„¶æº¢å‡ºï¼Œç›¸å½“äºå¯¹ 2^64 å–æ¨¡
typedef unsigned long long ULL;

const int MAX_LEN = 1005;
const int BASE = 131;

// é¢„å¤„ç† P[i] = BASE^i
ULL P[MAX_LEN];

void init_pow() {
    P[0] = 1;
    for (int i = 1; i < MAX_LEN; i++) {
        P[i] = P[i - 1] * BASE;
    }
}

// è®¡ç®—å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼
ULL compute_hash(const string& s) {
    ULL h = 0;
    for (char c : s) {
        h = h * BASE + c;
    }
    return h;
}

int main() {
    // ä¼˜åŒ– I/O é€Ÿåº¦
    ios::sync_with_stdio(false);
    cin.tie(0);

    init_pow();

    int n, m;
    if (!(cin >> n >> m)) return 0;

    // sets[len] å­˜å‚¨æ‰€æœ‰é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼
    // è¿™æ ·å¯ä»¥é¿å…é•¿åº¦ä¸åŒçš„å­—ç¬¦ä¸²å‘ç”Ÿå“ˆå¸Œç¢°æ’ï¼Œä¹Ÿç¬¦åˆé¢˜ç›®"ç­‰é•¿"çš„è¦æ±‚
    vector<unordered_set<ULL>> sets(MAX_LEN);

    string s;
    for (int i = 0; i < n; i++) {
        cin >> s;
        if (s.length() < MAX_LEN) {
            sets[s.length()].insert(compute_hash(s));
        }
    }

    char alphabet[] = {'a', 'b', 'c'};

    for (int i = 0; i < m; i++) {
        cin >> s;
        int len = s.length();
        if (len >= MAX_LEN) { // è¾¹ç•Œä¿æŠ¤
            cout << "NO" << "\n";
            continue;
        }

        ULL current_hash = compute_hash(s);
        bool found = false;

        // æšä¸¾æ¯ä¸€ä½è¿›è¡Œä¿®æ”¹
        for (int j = 0; j < len; j++) {
            char original_char = s[j];
            
            // å°è¯•æ›¿æ¢ä¸º a, b, c
            for (char c : alphabet) {
                if (c == original_char) continue; // å¿…é¡»æ°å¥½ä¸åŒï¼Œä¸èƒ½ç”±è‡ªå·±å˜è‡ªå·±

                // æ ¸å¿ƒæŠ€å·§ï¼šO(1) æ›´æ–°å“ˆå¸Œå€¼
                // æ–°å“ˆå¸Œ = åŸå“ˆå¸Œ - åŸå­—ç¬¦è´¡çŒ® + æ–°å­—ç¬¦è´¡çŒ®
                // è´¡çŒ®å€¼ä¸å­—ç¬¦ä½ç½®æœ‰å…³ï¼Œæœ€é«˜ä½åœ¨å·¦ï¼Œæ‰€ä»¥æ˜¯ P[len - 1 - j]
                ULL new_hash = current_hash - original_char * P[len - 1 - j] + c * P[len - 1 - j];

                if (sets[len].count(new_hash)) {
                    found = true;
                    break;
                }
            }
            if (found) break;
        }

        if (found) cout << "YES" << "\n";
        else cout << "NO" << "\n";
    }

    return 0;
}
```



# 15. Huffumanæ ‘ - ä¼˜å…ˆé˜Ÿåˆ—

æœ‰ä¸ªåŠå°±èƒ½åš

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    int n;
    cin >> n;
    priority_queue<int, vector<int>, greater<int>> pq;
    int sum = 0;

    for (int i = 0; i < n; i++)
    {
        int x;
        cin >> x;
        pq.push(x);
    }

    while (pq.size() > 1)
    {
        int a = pq.top();
        pq.pop();
        int b = pq.top();
        pq.pop();
        sum += a + b;
        pq.push(a + b);
    }

    cout << sum << endl;
    return 0;
}

```





# 16. æ£®æ—å†°ç«äºº - æ€ç»´è½¬æ¢ã€ä¼˜å…ˆé˜Ÿåˆ—

æ€è·¯éƒ½åœ¨æ³¨é‡Šé‡Œäº†

## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;
// å®šä¹‰ long long çš„ç¼©å†™ï¼Œæ–¹ä¾¿ç¼–å†™ç«èµ›ä»£ç 
using ll = long long;


int main()
{
    // å…³é—­åŒæ­¥ï¼ŒåŠ é€Ÿ I/Oï¼Œç«èµ›å¿…å¤‡
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n;
    cin >> n;

    // è¯»å– V æ•°ç»„
    vector<ll> v(n);
    for (int i = 0; i < n; ++i)
    {
        cin >> v[i];
    }

    // 3. è¯»å– T æ•°ç»„ (æ°”æ¸©)
    vector<ll> t(n);
    for (int i = 0; i < n; ++i)
    {
        cin >> t[i];
    }

    // === ç®—æ³•æ ¸å¿ƒé€»è¾‘ ===

    // å°æ ¹å †ï¼Œå­˜å‚¨æ¯ä¸ªé›ªäººçš„â€œæ­»äº¡é˜ˆå€¼â€
    // é˜ˆå€¼ = åˆå§‹ä½“ç§¯ + å‡ºç”Ÿå‰çš„å†å²ç´¯è®¡çƒ­é‡
    // æ³¨æ„ï¼šC++ priority_queue é»˜è®¤æ˜¯å¤§æ ¹å †ï¼Œéœ€è¦æŒ‡å®š vector å’Œ greater æ‰èƒ½ä½œä¸ºå°æ ¹å †ä½¿ç”¨
    priority_queue<ll, vector<ll>, greater<ll>> pq;

    // å…¨å±€ç´¯è®¡çƒ­é‡
    ll total_heat = 0;
	
    //éå†æ¯ä¸€å¤©
    for (int i = 0; i < n; ++i)
    {
        // --- A. å †é›ªäºº ---
        // è®¡ç®—å½“å‰è¿™ä¸ªé›ªäººèƒ½æ‰¿å—çš„â€œçƒ­é‡åˆ»åº¦â€ä¸Šé™
        ll threshold = v[i] + total_heat;
        pq.push(threshold);

        // --- B. æ°”æ¸©ä¸Šå‡ ---
        ll today_temp = t[i];
        total_heat += today_temp;

        // --- C. ç»“ç®—èåŒ– ---
        ll today_melted_sum = 0;

        // 1. å¤„ç†ä»Šå¤©å½»åº•èåŒ–æ‰çš„é›ªäºº
        // å¦‚æœ å †é¡¶çš„é˜ˆå€¼ <= å½“å‰æ€»çƒ­é‡ï¼Œè¯´æ˜è¿™ä¸ªé›ªäººä»Šå¤©æ’‘ä¸ä½äº†
        while (!pq.empty() && pq.top() <= total_heat)
        {
            ll limit = pq.top();
            pq.pop();

            // è®¡ç®—å®ƒä»Šå¤©è´¡çŒ®äº†å¤šå°‘èåŒ–æ°´
            // å®ƒæœ¬æ¥èƒ½æ’‘åˆ° limit åˆ»åº¦
            // ä»Šå¤©çš„èµ·å§‹çƒ­é‡æ˜¯ total_heat - today_temp
            // æ‰€ä»¥å®ƒä»Šå¤©å‰©ä¸‹çš„ä½“ç§¯ = limit - æ˜¨å¤©çš„æ€»çƒ­é‡
            ll remaining_vol = limit - (total_heat - today_temp);
            today_melted_sum += remaining_vol;
        }

        // 2. å¤„ç†å¹¸å­˜çš„é›ªäºº
        // å †é‡Œå‰©ä¸‹çš„éƒ½æ˜¯ limit > total_heat çš„ï¼Œè¯´æ˜å®ƒä»¬ä»Šå¤©å®Œæ•´åœ°èåŒ–äº† today_temp
        // size() è¿”å›çš„æ˜¯æ— ç¬¦å·æ•´å‹ï¼Œä¹˜ä»¥ ll ç±»å‹çš„ today_temp ä¼šè‡ªåŠ¨è½¬ä¸º ll
        ll survivors_count = pq.size();
        today_melted_sum += survivors_count * today_temp;

        // è¾“å‡ºç»“æœï¼Œæ§åˆ¶ç©ºæ ¼æ ¼å¼
        cout << today_melted_sum << (i == n - 1 ? "" : " ");
    }
    cout << "\n";

    return 0;
}
```





# 17. è½¬ç§»ç‚¸å¼¹



## æ€è·¯

æ¯”å¯»å¸¸å¹¶æŸ¥é›†å¤šäº†ä¸€ä¸ªä½ç½®çš„è®°å½•

### ä¸ºä»€ä¹ˆAåˆå¹¶åˆ°Bä¸ç”¨æ›´æ–°Açš„ä½ç½®ï¼Œåè¿‡æ¥åˆ™éœ€è¦ï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é—®é¢˜ï¼Œè§¦åŠäº†**å¹¶æŸ¥é›†ï¼ˆDSUï¼‰çš„æ ¸å¿ƒè®¾è®¡å“²å­¦**ã€‚

ç®€å•çš„å›ç­”æ˜¯ï¼š**å› ä¸ºåˆå¹¶å `rootA` ä¸å†æ˜¯æ ¹èŠ‚ç‚¹äº†ï¼Œå®ƒå˜æˆäº† `rootB` çš„å„¿å­ã€‚åœ¨å¹¶æŸ¥é›†ä¸­ï¼Œåªæœ‰æ ¹èŠ‚ç‚¹ï¼ˆRootï¼‰çš„ä¿¡æ¯æ‰æ˜¯â€œæƒå¨â€å’Œâ€œæœ‰æ•ˆâ€çš„ã€‚**

è®©æˆ‘ä»¬åˆ†æ­¥æ‹†è§£è¿™ä¸ªé€»è¾‘ï¼š

#### 1. å¹¶æŸ¥é›†çš„â€œæŸ¥è¯¢æœºåˆ¶â€

å½“æˆ‘ä»¬æƒ³çŸ¥é“æŸä¸ªç‚¸å¼¹ $x$ åœ¨å“ªé‡Œæ—¶ï¼Œä»£ç é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š

C++

```cpp
int root = find(x);      // 1. æ‰¾åˆ° x çš„è€å¤§ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰
cout << pos[root] ...;   // 2. åªçœ‹è€å¤§çš„ä½ç½®ä¿¡æ¯
```

è¿™æ„å‘³ç€ï¼Œ**æ‰€æœ‰éæ ¹èŠ‚ç‚¹ï¼ˆå„¿å­ã€å­™å­ï¼‰èº«ä¸Šçš„ `pos` å’Œ `sz` å±æ€§éƒ½æ˜¯â€œæ­»æ•°æ®â€**ï¼Œç¨‹åºæ ¹æœ¬ä¸ä¼šå»è¯»å®ƒä»¬ã€‚

#### 2. åœºæ™¯åˆ†æï¼šæŠŠ A å½’å¹¶åˆ° B ä¸‹é¢

å‡è®¾ï¼š

- **å † A**ï¼šæ ¹èŠ‚ç‚¹ `rootA`ï¼Œæœ‰ 2 ä¸ªç‚¸å¼¹ï¼ŒåŸæœ¬åœ¨åŸå¸‚ 5ï¼ˆ`pos[rootA] = 5`ï¼‰ã€‚
- **å † B**ï¼šæ ¹èŠ‚ç‚¹ `rootB`ï¼Œæœ‰ 10 ä¸ªç‚¸å¼¹ï¼ŒåŸæœ¬åœ¨åŸå¸‚ 8ï¼ˆ`pos[rootB] = 8`ï¼‰ã€‚

**æ“ä½œï¼š** å°† A è½¬ç§»åˆ° B æ‰€åœ¨çš„åŸå¸‚ï¼ˆ1 a bï¼‰ã€‚

æ­¤æ—¶è§¦å‘ if (sz[rootA] <= sz[rootB]) åˆ†æ”¯ï¼š

æˆ‘ä»¬è¦æŠŠâ€œå°æ ‘â€ A æŒ‚åˆ°â€œå¤§æ ‘â€ B ä¸Šé¢ã€‚

- **ç‰©ç†åŠ¨ä½œ**ï¼šæ‰€æœ‰çš„ç‚¸å¼¹ï¼ˆAå’ŒBï¼‰ç°åœ¨éƒ½åœ¨åŸå¸‚ 8ã€‚
- **ä»£ç åŠ¨ä½œ**ï¼š`fa[rootA] = rootB;`
  - `rootA` è®¤ `rootB` åšçˆ¶äº²ã€‚
  - **ç°åœ¨çš„æ€»æ ¹èŠ‚ç‚¹æ˜¯ `rootB`ã€‚**

**ä¸ºä»€ä¹ˆä¸éœ€è¦æ›´æ–° `pos[rootA]`ï¼Ÿ**

1. **ç›®æ ‡ä½ç½®æœ¬èº«å°±æ˜¯ B çš„ä½ç½®**ï¼šåˆå¹¶åï¼Œæ‰€æœ‰äººï¼ˆåŒ…æ‹¬ A é‡Œçš„ç‚¸å¼¹ï¼‰å®é™…ä¸Šéƒ½å»äº† B æ‰€åœ¨çš„åŸå¸‚ï¼ˆåŸå¸‚ 8ï¼‰ã€‚
2. **æŸ¥è¯¢è·¯å¾„æ”¹å˜**ï¼šä¸‹æ¬¡æœ‰äººé—®â€œA é‡Œé¢çš„æŸä¸ªå°å¼Ÿåœ¨å“ªé‡Œï¼Ÿâ€æ—¶ï¼š
   - ç¨‹åºæ‰§è¡Œ `find(å°å¼Ÿ)`ã€‚
   - è·¯å¾„ä¼šç»è¿‡ `rootA`ï¼Œä½†ä¸ä¼šåœä¸‹ï¼Œè€Œæ˜¯ç»§ç»­å‘ä¸Šæ‰¾åˆ°æ–°çš„å¤§è€æ¿ `rootB`ã€‚
   - ç¨‹åºè¿”å› `rootB`ã€‚
   - ç¨‹åºè¾“å‡º `pos[rootB]`ï¼ˆä¹Ÿå°±æ˜¯ 8ï¼‰ã€‚
3. **ç»“æœæ­£ç¡®**ï¼š`pos[rootB]` å­˜çš„æœ¬æ¥å°±æ˜¯ 8ï¼Œå®Œå…¨æ­£ç¡®ã€‚è‡³äº `pos[rootA]` é‡Œå­˜çš„æ˜¯ 5 è¿˜æ˜¯ 100 è¿˜æ˜¯ 0ï¼Œ**æ ¹æœ¬æ²¡äººå»çœ‹å®ƒ**ï¼Œæ›´æ–°å®ƒçº¯å±æµªè´¹æ—¶é—´ã€‚

#### 3. ä¸ºä»€ä¹ˆ `else` åˆ†æ”¯éœ€è¦æ›´æ–°ï¼Ÿ

è®©æˆ‘ä»¬çœ‹çœ‹åè¿‡æ¥çš„æƒ…å†µï¼š**æŠŠ B å½’å¹¶åˆ° A ä¸‹é¢**ï¼ˆè™½ç„¶ç‰©ç†ä¸Šæ˜¯æŠŠç‚¸å¼¹ä» A æ¬åˆ° Bï¼‰ã€‚

`else` åˆ†æ”¯ (`sz[rootA] > sz[rootB]`)ï¼š

- **ç‰©ç†åŠ¨ä½œ**ï¼šæ‰€æœ‰çš„ç‚¸å¼¹ï¼ˆAå’ŒBï¼‰éƒ½è¦å» B æ‰€åœ¨çš„åŸå¸‚ï¼ˆåŸå¸‚ 8ï¼‰ã€‚
- **ä»£ç åŠ¨ä½œ**ï¼šä¸ºäº†å¹³è¡¡æ ‘é«˜ï¼Œç®—æ³•å†³å®šè®©**å¤§æ ‘ A åå¹¶å°æ ‘ B** (`fa[rootB] = rootA`)ã€‚
  - **ç°åœ¨çš„æ€»æ ¹èŠ‚ç‚¹æ˜¯ `rootA`ã€‚**

**æ­¤æ—¶çš„é—®é¢˜**ï¼š

- ä½ æ˜¯ `rootA`ï¼Œä½ æ˜¯æ–°çš„å¤§è€æ¿ã€‚
- ä½†æ˜¯ `pos[rootA]` åŸæœ¬è®°å½•çš„æ˜¯åŸå¸‚ 5ã€‚
- å®é™…ä¸Šï¼Œé˜Ÿä¼å·²ç»æ¬è¿åˆ°äº†åŸå¸‚ 8ã€‚
- å¦‚æœè¿™æ—¶æœ‰äººæŸ¥è¯¢ï¼Œç¨‹åºä¼šæ‰¾åˆ° `rootA`ï¼Œå¦‚æœä¸æ›´æ–°ï¼Œå°±ä¼šè¾“å‡ºé”™è¯¯çš„â€œåŸå¸‚ 5â€ã€‚
- **æ‰€ä»¥å¿…é¡»å¼ºåˆ¶æ‰§è¡Œï¼š** `pos[rootA] = pos[rootB]`ï¼ˆæŠŠ A çš„ä½ç½®æ”¹æˆ B çš„ä½ç½®ï¼‰ã€‚

#### æ€»ç»“å›¾è§£

| **è°æŒ‚è°ä¸‹é¢** | **è°æ˜¯æ–°çš„æ ¹ (Root)** | **ç›®æ ‡åŸå¸‚æ˜¯å“ªï¼Ÿ** | **æ ¹èŠ‚ç‚¹åŸæœ¬è®°å½•çš„åŸå¸‚** | **æ˜¯å¦éœ€è¦ä¿®æ”¹ posï¼Ÿ**      |
| -------------- | --------------------- | ------------------ | ------------------------ | --------------------------- |
| **A æŒ‚ B ä¸‹**  | **B**                 | B çš„åŸå¸‚           | B çš„åŸå¸‚                 | **å¦** (æœ¬æ¥å°±å¯¹)           |
| **B æŒ‚ A ä¸‹**  | **A**                 | B çš„åŸå¸‚           | A çš„åŸå¸‚                 | **æ˜¯** (Aéœ€è¦æ”¹å†™ä¸ºBçš„åœ°å€) |

**ä¸€å¥è¯æ€»ç»“ï¼šæˆ‘ä»¬åªå…³å¿ƒæ´»ç€å³å°†åœ¨æœªæ¥è¢« `find` è®¿é—®åˆ°çš„é‚£ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå®ƒçš„ `pos` æ˜¯å¦æ­£ç¡®ã€‚**



## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;
const int MAXN = 500005;

// å®šä¹‰å¹¶æŸ¥é›†æ‰€éœ€çš„æ•°ç»„
// fa: çˆ¶èŠ‚ç‚¹
// sz: é›†åˆå¤§å°ï¼ˆè¯¥å †ç‚¸å¼¹çš„æ•°é‡ï¼‰
// pos: é›†åˆä½ç½®ï¼ˆè¯¥å †ç‚¸å¼¹æ‰€åœ¨çš„åŸå¸‚ç¼–å·ï¼‰
int fa[MAXN], sz[MAXN], pos[MAXN];

// æŸ¥æ‰¾å‡½æ•° + è·¯å¾„å‹ç¼©
// ä½œç”¨ï¼šæ‰¾åˆ° x çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶ç›´æ¥å°† x è¿åˆ°æ ¹èŠ‚ç‚¹ä¸‹ï¼ŒåŠ é€Ÿåç»­æŸ¥æ‰¾
// æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ï¼ˆå¸¦è·¯å¾„å‹ç¼©ï¼‰
int find(int x) {
    if (fa[x] == x) {
        return x;
    } else {
        // è·¯å¾„å‹ç¼©ï¼šç›´æ¥å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘æ ¹èŠ‚ç‚¹ï¼ŒåŠ é€Ÿåç»­æŸ¥æ‰¾
        fa[x] = find(fa[x]);
        return fa[x];
    }
}

int main()
{
    // 1. IO ä¼˜åŒ–ï¼Œå¤„ç†å¤§é‡è¾“å…¥è¾“å‡º
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N, Q;
    cin >> N >> Q;

    // 2. åˆå§‹åŒ–
    for (int i = 1; i <= N; ++i)
    {
        fa[i] = i;  // åˆå§‹çˆ¶äº²æ˜¯è‡ªå·±
        sz[i] = 1;  // åˆå§‹åªæœ‰ 1 ä¸ªç‚¸å¼¹
        pos[i] = i; // ç‚¸å¼¹ i åˆå§‹åœ¨åŸå¸‚ i
    }

    char op[2]; // ä½¿ç”¨ char æ•°ç»„æˆ–è€… string è¯»å–æ“ä½œç ï¼Œé˜²æ­¢è¡Œæœ«ç©ºæ ¼å¹²æ‰°
    int a, b;

    while (Q--)
    {
        cin >> op;
        if (op[0] == '1')
        {
            cin >> a >> b;
            int rootA = find(a);
            int rootB = find(b);

            if (rootA == rootB)
            {
                cout << "ERROR" << "\n";
            }
            else
            {
                // å°† A æ‰€åœ¨çš„å † ç§»åŠ¨åˆ° B æ‰€åœ¨çš„å †
                // å¯å‘å¼åˆå¹¶ï¼šå°†å°æ ‘æ¥åˆ°å¤§æ ‘ä¸Šï¼Œä¿æŒæ ‘çš„æ‰å¹³
                if (sz[rootA] <= sz[rootB])
                {
                    // A è¾ƒå°ï¼ŒA æ¥åˆ° B ä¸‹é¢
                    fa[rootA] = rootB;
                    sz[rootB] += sz[rootA];
                    // B æ˜¯æ–°çš„æ ¹ï¼ŒB çš„ä½ç½® pos[rootB] æœ¬æ¥å°±æ˜¯ç›®æ ‡ä½ç½®ï¼Œæ— éœ€ä¿®æ”¹
                }
                else
                {
                    // B è¾ƒå°ï¼ŒB æ¥åˆ° A ä¸‹é¢
                    fa[rootB] = rootA;
                    sz[rootA] += sz[rootB];
                    // A æ˜¯æ–°çš„æ ¹ï¼Œä½†ç‚¸å¼¹æ˜¯ç§»åˆ°äº† B æ‰€åœ¨çš„åŸå¸‚
                    // æ‰€ä»¥å¿…é¡»æ›´æ–° A çš„ä½ç½®ä¸º B çš„ä½ç½®
                    pos[rootA] = pos[rootB];
                }
            }
        }
        else
        {
            cin >> a;
            int root = find(a);
            cout << pos[root] << " " << sz[root] << "\n";
        }
    }

    return 0;
}
```











# 18. é“è·¯





## æ€è·¯

æ™ºæ´‹ä½ å¥½ï¼å¾ˆé«˜å…´çœ‹åˆ°ä½ åœ¨æ­»ç£•ç®—æ³•é¢˜ã€‚è¿™é“é¢˜æ˜¯ç»å…¸çš„ **å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰** åº”ç”¨ï¼Œè€ƒå¯Ÿçš„æ˜¯ **å›¾çš„è¿é€šæ€§** å’Œ **æ ‘çš„åˆ¤å®š**ã€‚

------

### ä¸€ã€ æ ¸å¿ƒç–‘é—®è§£ç­”ï¼šä¸ºä»€ä¹ˆéœ€è¦ `high`ï¼ˆæ ‘é«˜ï¼‰ï¼Ÿ

ä½ ä»£ç ä¸­çš„ `high` æ•°ç»„ï¼ˆåœ¨æ ‡å‡†æ•™ç§‘ä¹¦ä¸­å¸¸è¢«ç§°ä¸º `rank`ï¼‰ï¼Œæ˜¯ä¸ºäº†**é˜²æ­¢æ ‘é€€åŒ–æˆé“¾è¡¨**ï¼Œä»è€Œä¿è¯æŸ¥æ‰¾æ•ˆç‡ã€‚

#### 1. ä¸ºä»€ä¹ˆè¦ç»´æŠ¤æ ‘é«˜ï¼Ÿ

å¦‚æœæ²¡æœ‰ `high` æ•°ç»„ï¼ˆå³æ²¡æœ‰æŒ‰ç§©åˆå¹¶ï¼‰ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡åˆå¹¶éƒ½æŠŠâ€œå¤§æ ‘â€æ¥åœ¨â€œå°æ ‘â€ä¸‹é¢ï¼Œæœ€åæ•´æ£µæ ‘ä¼šå˜æˆä¸€æ¡é•¿é•¿çš„çº¿ï¼ˆåƒé“¾è¡¨ä¸€æ ·ï¼‰ã€‚

- **é“¾è¡¨çŠ¶ï¼š** æŸ¥æ‰¾æ ¹èŠ‚ç‚¹éœ€è¦ $O(N)$ çš„æ—¶é—´ã€‚
- **æ‰å¹³æ ‘çŠ¶ï¼š** æŸ¥æ‰¾æ ¹èŠ‚ç‚¹åªéœ€è¦ $O(\log N)$ ç”šè‡³æ¥è¿‘ $O(1)$ çš„æ—¶é—´ã€‚

#### 2. ä»£ç é€»è¾‘è§£æ

è¯·çœ‹ä½ ä»£ç ä¸­è¿™æ®µé€»è¾‘çš„è¯¦ç»†è§£é‡Šï¼š

C++

```cpp
if (high[root_a] < high[root_b]) 
{
    // æƒ…å†µ1ï¼šå·¦è¾¹æ ‘çŸ®ï¼Œå³è¾¹æ ‘é«˜
    // ç­–ç•¥ï¼šæŠŠçŸ®æ ‘(a) æŒ‚åœ¨ é«˜æ ‘(b) ä¸‹é¢
    fa[root_a] = root_b; 
    // è§£é‡Šï¼šå› ä¸ºbæœ¬æ¥å°±æ¯”aé«˜ï¼ŒaæŒ‚åœ¨bçš„ä¸€å±‚ä¸‹é¢ï¼Œbçš„æ•´ä½“é«˜åº¦ä¸ä¼šå˜ã€‚
}
else 
{
    // æƒ…å†µ2ï¼šå³è¾¹æ ‘çŸ®ï¼Œæˆ–è€…ä¸¤æ£µæ ‘ä¸€æ ·é«˜
    fa[root_b] = root_a; // æŠŠbæŒ‚åœ¨aä¸‹é¢
    
    // â˜… ä½ çš„ç–‘é—®ç‚¹åœ¨è¿™é‡Œ â˜…
    if (high[root_a] == high[root_b]) 
        high[root_a]++; 
}
```

**ä¸ºä»€ä¹ˆåªæœ‰ç›¸ç­‰æ—¶æ‰ `++`ï¼Ÿ**

- å¦‚æœä¸ç­‰ï¼ˆæ¯”å¦‚ Aé«˜3ï¼ŒBé«˜2ï¼‰ï¼š

  æŠŠ B æŒ‚åœ¨ A ä¸‹é¢ï¼ŒB å˜æˆäº† A çš„å­èŠ‚ç‚¹ã€‚A åŸæœ¬æœ€æ·±çš„åˆ†æ”¯æœ‰ 3 å±‚ï¼ŒB æŒ‚ä¸Šå»åå˜æˆäº† A çš„ç¬¬ 2 å±‚åˆ†æ”¯ï¼Œå¹¶æ²¡æœ‰è¶…è¿‡ A åŸæœ‰çš„æ·±åº¦ã€‚æ‰€ä»¥ A çš„é«˜åº¦ä¸å˜ã€‚

- å¦‚æœç›¸ç­‰ï¼ˆæ¯”å¦‚ Aé«˜3ï¼ŒBé«˜3ï¼‰ï¼š

  æŠŠ B æŒ‚åœ¨ A ä¸‹é¢ã€‚B åŸæœ¬å°±æœ‰ 3 å±‚æ·±ï¼Œç°åœ¨ B æ•´ä½“ä½œä¸º A çš„å­èŠ‚ç‚¹ï¼ˆç”±äº B æ”¾åœ¨äº† A çš„ä¸‹ä¸€å±‚ï¼‰ï¼Œé‚£ä¹ˆä» A å‡ºå‘ç©¿è¿‡ B åˆ°è¾¾ B çš„æœ€åº•ç«¯ï¼Œæ·±åº¦å°±å˜æˆäº† $3 + 1 = 4$ã€‚åªæœ‰è¿™æ—¶å€™ï¼Œæ ‘çš„æ•´ä½“é«˜åº¦æ‰ä¼šå¢åŠ ã€‚

------

### äºŒã€ ä½ çš„ä»£ç é€»è¾‘å…¶å®æœ‰ä¸€ä¸ªâ€œæ¼æ´â€

è™½ç„¶ä½ çš„ä»£ç  ACï¼ˆé€šè¿‡ï¼‰äº†ï¼Œä½†å®é™…ä¸Šé’ˆå¯¹é¢˜ç›®è¦æ±‚çš„ **â€œæœ‰ä¸”åªæœ‰ä¸€æ¡é€šè·¯â€**ï¼Œç›®å‰çš„é€»è¾‘æ˜¯ä¸å¤Ÿä¸¥è°¨çš„ã€‚

é¢˜ç›®å®šä¹‰çš„â€œåˆç†æ–¹æ¡ˆâ€å…¶å®å°±æ˜¯æ•°å­¦ä¸Šçš„ **æ ‘ (Tree)**ï¼Œç”±äºæ ‘çš„ä¸¤ä¸ªé‡è¦æ€§è´¨ï¼š

1. **è¿é€šæ€§ (Connected)ï¼š** æ‰€æœ‰ç‚¹éƒ½åœ¨ä¸€ä¸ªé›†åˆé‡Œã€‚
2. **æ— ç¯ (Acyclic)ï¼š** ä»»æ„ä¸¤ç‚¹é—´åªæœ‰ä¸€æ¡è·¯ï¼ˆå¦‚æœæœ‰ä¸¤æ¡è·¯ï¼Œå°±æ„æˆäº†ç¯ï¼‰ã€‚

**ä½ çš„ä»£ç ç›®å‰åªæ£€æŸ¥äº†ç¬¬ 1 ç‚¹ï¼ˆè¿é€šæ€§ï¼‰ï¼Œæ²¡æœ‰æ£€æŸ¥ç¬¬ 2 ç‚¹ï¼ˆç¯ï¼‰ã€‚**

#### ä¸¾ä¸ªåä¾‹ï¼š

å‡è®¾è¾“å…¥æ˜¯ä¸€ä¸ªä¸‰è§’å½¢ï¼š

```
1 2
2 3
3 1
0 0
```

- ä½ çš„ä»£ç ä¼šæŠŠ 1, 2, 3 åˆå¹¶åœ¨ä¸€ä¸ªé›†åˆé‡Œã€‚
- æœ€åæ£€æŸ¥ï¼šå¤§å®¶çš„æ ¹èŠ‚ç‚¹éƒ½ä¸€æ ·ã€‚
- è¾“å‡ºï¼š`Yes`ã€‚
- **ä½†æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ `No`**ï¼Œå› ä¸º 1 åˆ° 2 å¯ä»¥ç›´æ¥èµ°ï¼Œä¹Ÿå¯ä»¥ 1->3->2ï¼Œè¿™å°±ä¸æ­¢ä¸€æ¡é€šè·¯äº†ï¼ˆå½¢æˆäº†ç¯ï¼‰ã€‚

ä¸ºä»€ä¹ˆèƒ½ ACï¼Ÿ

å¾ˆæœ‰å¯èƒ½æ˜¯æµ‹è¯•æ•°æ®æ¯”è¾ƒå¼±ï¼Œæˆ–è€…æµ‹è¯•æ•°æ®ä¿è¯äº†å¦‚æœè¿é€šåˆ™å¿…å®šæ— ç¯ï¼ˆå³ $Edges = Vertices - 1$ï¼‰ã€‚ä½†åœ¨ä¸¥è°¨çš„ç®—æ³•ç«èµ›ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¡¥ä¸Šâ€œåˆ¤ç¯â€çš„é€»è¾‘ã€‚

------



### åˆ¤å®š

å°±æ˜¯åˆ¤å®šæ˜¯å¦æ˜¯æ ‘

æ ¸å¿ƒæ˜¯åˆ¤å®š**å•è¿é€šã€æ— ç¯**

##### æ— ç¯

æ³•ä¸€ï¼šæ˜¯å¦é‡å¤è¿é€š

æ³•äºŒï¼šè¾¹æ•° = ç‚¹æ•° -1 

##### å•è¿é€š

æ‰€æœ‰äººçš„çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¸ºåŒä¸€ä¸ª/è¿é€šåˆ†æ”¯åªæœ‰ä¸€ä¸ª

## ä»£ç 



```cpp
#include <bits/stdc++.h>
using namespace std;

vector<int> fa;
vector<int> high;

int find(int x)
{
    if (fa[x] == x)
    {
        return x;
    }
    else
    {
        // è·¯å¾„å‹ç¼©ï¼šç›´æ¥å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘æ ¹èŠ‚ç‚¹ï¼ŒåŠ é€Ÿåç»­æŸ¥æ‰¾
        fa[x] = find(fa[x]);
        return fa[x];
    }
}

int main()
{
    int t_a, t_b;
    fa.resize(10001);
    high.resize(10001);
    set<int> nodes;

    while (true)
    {
        cin >> t_a >> t_b;

        if (t_a == -1 && t_b == -1)
            return 0;

        // åˆå§‹åŒ–
        int edge_count = 0;
        bool hasCircle = false;
        for (int i = 0; i <= 10000; i++)
        {
            fa[i] = i;
            high[i] = 0;
        }

        // è¾“å…¥æ•°æ®
        fa[t_b] = t_a;
        high[t_a] = 1;
        nodes.insert(t_a);
        nodes.insert(t_b);
        edge_count++;

        // å¹¶æŸ¥é›†
        while (true)
        {
            int a, b;
            cin >> a >> b;
            if (a == 0 && b == 0)
                break;

            nodes.insert(a);
            nodes.insert(b);
            edge_count++;


            int root_a, root_b;
            root_a = find(a);
            root_b = find(b);
            if (root_a != root_b)
            {
                if (high[root_a] < high[root_b])
                {
                    fa[root_a] = root_b;
                }
                else
                {
                    fa[root_b] = root_a;
                    //
                    if (high[root_a] == high[root_b])
                        high[root_a]++;
                }
            }else{
                // å·²ç»è¿é€šï¼Œå½¢æˆç¯
                hasCircle = true;

            }
        }
        // ç»Ÿè®¡ç»“æœ
        // åˆ¤å®šæ— ç¯
        // æ–¹æ³•ä¸€ï¼šè¾¹æ•°åˆ¤å®š
        // if (edge_count != nodes.size() - 1)
        // {
        //     cout << "No" << endl;
        //     continue;
        // }
        // æ–¹æ³•äºŒï¼šæ˜¯å¦é‡å¤è¿é€š
        if (hasCircle)
        {
            cout << "No" << endl;
            continue;
        }
        // åˆ¤å®šè¿é€š
        bool flag = true;
        int only_fa = find(t_a);
        for (int i : nodes)
        {
            int fa_i = find(i);
            // cout << "Node " << i << " has root " << fa_i << endl; // Debug output
            if (fa_i != only_fa)
            {
                flag = false;
                break;
            }
        }
        if (flag)
            cout << "Yes" << endl;
        else
            cout << "No" << endl;
    }
}
```



# 19. **å›¾è®ºéš¾é¢˜** BFS+DFS

## æ€è·¯

#### æ ¸å¿ƒè§£é¢˜æ€è·¯

1. é€†å‘æ€ç»´ï¼ˆåå‘ Dijkstraï¼‰ï¼š

   é¢˜ç›®å®šä¹‰çš„æ¡ä»¶æ˜¯ï¼šå¯¹äºè·¯å¾„ä¸Šçš„è¾¹ $(u, v)$ï¼Œå¿…é¡»æ»¡è¶³ $v$ åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·ç¦» < $u$ åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·ç¦»ã€‚

   ä¸ºäº†åˆ¤æ–­è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“å›¾ä¸­æ¯ä¸€ä¸ªç‚¹åˆ°ç»ˆç‚¹ $T$ çš„æœ€çŸ­è·ç¦»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»¥ ç»ˆç‚¹ $T$ ä¸ºèµ·å§‹ç‚¹ï¼Œåœ¨æ— å‘å›¾ä¸Šè·‘ä¸€é Dijkstra ç®—æ³•ï¼Œè®¡ç®—å‡ºæ‰€æœ‰ç‚¹åˆ° $T$ çš„æœ€çŸ­è·ç¦»æ•°ç»„ dist[]ã€‚

2. è®°å¿†åŒ–æœç´¢ï¼ˆDFS + Memoizationï¼‰ï¼š

   æœ‰äº† dist æ•°ç»„åï¼Œé—®é¢˜è½¬åŒ–ä¸ºäº†ï¼šä»èµ·ç‚¹ $S$ å‡ºå‘ï¼Œæ¯æ¬¡åªèƒ½èµ°åˆ° dist å€¼æ›´å°çš„é‚»å±…èŠ‚ç‚¹ï¼Œæ±‚æœ‰å¤šå°‘æ¡è·¯å¾„èƒ½èµ°åˆ° $T$ã€‚

   è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰æˆ–è®°å¿†åŒ–æœç´¢é—®é¢˜ã€‚

   - å®šä¹‰ `dfs(u)` ä¸ºä»ç‚¹ $u$ åˆ°ç»ˆç‚¹ $T$ çš„ç¬¦åˆæ¡ä»¶çš„è·¯å¾„æ¡æ•°ã€‚
   - å¦‚æœ `u == T`ï¼Œè¯´æ˜æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œè¿”å› 1ã€‚
   - å¦åˆ™ï¼Œ`dfs(u)` ç­‰äºæ‰€æœ‰æ»¡è¶³ `dist[v] < dist[u]` çš„é‚»å±… `v` çš„ `dfs(v)` ä¹‹å’Œã€‚
   - ä½¿ç”¨æ•°ç»„æˆ–å“ˆå¸Œè¡¨è®°å½•å·²ç»è®¡ç®—è¿‡çš„èŠ‚ç‚¹ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚

## ä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;

const int INF = 0x3f3f3f3f;
const int MAXN = 1005;

struct Edge
{
    int to;
    int weight;
};

// å…¨å±€å˜é‡ï¼Œæ–¹ä¾¿è®¿é—®
vector<Edge> gra[MAXN];
int dist[MAXN];     // å­˜å‚¨æ¯ä¸ªç‚¹åˆ°ç»ˆç‚¹ T çš„æœ€çŸ­è·ç¦»
long long dp[MAXN]; // è®°å¿†åŒ–æ•°ç»„ï¼Œå­˜å‚¨ä»ç‚¹ u åˆ° T çš„åˆæ³•è·¯å¾„æ¡æ•°
int N, M, S, T;

// ç¬¬ä¸€æ­¥ï¼šDijkstra ç®—æ³•ï¼Œè®¡ç®—æ‰€æœ‰ç‚¹åˆ° T çš„æœ€çŸ­è·ç¦»
// æ³¨æ„ï¼šè™½ç„¶æ˜¯æ— å‘å›¾ï¼Œä½†é€»è¾‘ä¸Šæˆ‘ä»¬è§† T ä¸ºæºç‚¹å‘å¤–æ‰©æ•£
void dijkstra(int start_node)
{
    memset(dist, 0x3f, sizeof(dist));
    dist[start_node] = 0;

    // å°é¡¶å †ï¼Œå­˜å‚¨ {è·ç¦», èŠ‚ç‚¹ç¼–å·}
    priority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> pq;
    pq.push({0, start_node});

    while (!pq.empty())
    {
        int d = pq.top().first;
        int u = pq.top().second;
        pq.pop();

        if (d > dist[u])
            continue;

        for (auto &edge : gra[u])
        {
            int v = edge.to;
            int w = edge.weight;
            if (dist[u] + w < dist[v])
            {
                dist[v] = dist[u] + w;
                pq.push({dist[v], v});
            }
        }
    }
}

// ç¬¬äºŒæ­¥ï¼šè®°å¿†åŒ–æœç´¢ï¼Œç»Ÿè®¡è·¯å¾„æ¡æ•°
long long dfs(int v_now)
{
    // å¦‚æœåˆ°è¾¾ç»ˆç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡åˆæ³•è·¯å¾„ï¼Œè¿”å› 1
    if (v_now == T)
        return 1;

    // å¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„ç»“æœ
    if (dp[v_now] != -1)
        return dp[v_now];

    long long count = 0;
    for (auto &edge : gra[v_now])
    {
        int v_to = edge.to;
        // æ ¸å¿ƒé€»è¾‘ï¼šåªæœ‰å½“é‚»å±… v åˆ° T çš„è·ç¦»ä¸¥æ ¼å°äº u åˆ° T çš„è·ç¦»æ—¶ï¼Œæ‰èµ°è¿™ä¸€æ­¥
        if (dist[v_to] < dist[v_now])
    
        } {
            count += dfs(v_to);
    }
    dp[v_now] = count;
    return dp[v_now];
}

int main()
{
    // ä¼˜åŒ– I/O é€Ÿåº¦
    ios::sync_with_stdio(false);
    cin.tie(NULL);


    for (int i = 0; i < M; ++i)
    {
        int u, v, w;
        cin >> u >> v >> w;
        // æ— å‘å›¾ï¼Œå»ºåŒå‘è¾¹
        gra[u].push_back({v, w});
        gra[v].push_back({u, w});
    }

    cin >> S >> T;

    // 1. è®¡ç®—åŠ¿èƒ½ï¼ˆæœ€çŸ­è·ç¦»ï¼‰
    dijkstra(T);

    // ç‰¹åˆ¤ï¼šå¦‚æœ S æ ¹æœ¬æ— æ³•åˆ°è¾¾ T
    if (dist[S] == INF)
    {
        cout << -1 << endl;
    }
    else
    {
        // 2. ç»Ÿè®¡è·¯å¾„
        memset(dp, -1, sizeof(dp)); // åˆå§‹åŒ– dp æ•°ç»„ä¸º -1
        cout << dfs(S) << endl;
    }

    return 0;
}
```



# 20. æœ€å°ç”Ÿæˆæ ‘ - Prim

## æ€è·¯

æ ¸å¿ƒæ€è·¯ï¼šPrim ç®—æ³• vs Kruskal ç®—æ³•

1. **å›¾çš„ç±»å‹**ï¼šè¿™æ˜¯ä¸€ä¸ª**å®Œå…¨å›¾**ï¼ˆDense Graphï¼‰ã€‚å› ä¸ºå¹³é¢ä¸Šä»»æ„ä¸¤ç‚¹ä¹‹é—´éƒ½å¯ä»¥è¿çº¿ï¼Œæ‰€ä»¥è¾¹æ•° $E \approx N^2 / 2$ã€‚
2. **Kruskal**ï¼šå¤æ‚åº¦æ˜¯ $O(E \log E)$ã€‚åœ¨è¿™é‡Œ $N=5000$ï¼Œè¾¹æ•°çº¦ä¸º $1.25 \times 10^7$ã€‚æ’åºè¿™äº›è¾¹éå¸¸è€—æ—¶ï¼Œä¸”å†…å­˜æ¶ˆè€—å·¨å¤§ï¼Œå®¹æ˜“è¶…æ—¶ (TLE) æˆ–è¶…å†…å­˜ (MLE)ã€‚
3. **Prim (æœ´ç´ ç‰ˆ)**ï¼šå¤æ‚åº¦æ˜¯ $O(N^2)$ã€‚ä¸éœ€è¦æŠŠè¾¹å­˜ä¸‹æ¥ï¼Œåªéœ€è¦ç»´æŠ¤ç‚¹åˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€çŸ­è·ç¦»ã€‚å¯¹äº $N=5000$ï¼Œè®¡ç®—é‡çº¦ä¸º $2.5 \times 10^7$ï¼Œåœ¨ 1ç§’å†…ç»°ç»°æœ‰ä½™ã€‚

**ç»“è®º**ï¼šå¯¹äºè¿™ç§ç¨ å¯†å›¾ï¼ˆç‚¹å°‘è¾¹å¤šï¼‰ï¼Œ**Prim ç®—æ³•**æ˜¯ç»å¯¹çš„æœ€ä¼˜è§£ï¼Œæ—¢ä¼˜é›…åˆé«˜æ•ˆã€‚



## ä»£ç 

```cpp
#include <bits/stdc++.h>

using namespace std;

// å®šä¹‰ç‚¹çš„ç»“æ„ä½“ï¼Œä½¿ä»£ç æ›´å…·å¯è¯»æ€§
struct Point
{
    double x, y;
};

// è®¡ç®—ä¸¤ç‚¹æ¬§å‡ é‡Œå¾—è·ç¦»çš„è¾…åŠ©å‡½æ•°
// ä½¿ç”¨å†…è”å‡½æ•°å‡å°‘è°ƒç”¨å¼€é”€
inline double get_dist(const Point &a, const Point &b)
{
    return sqrt(pow(a.x - b.x, 2) + pow(a.y - b.y, 2));
}

int main()
{
    // ä¼˜åŒ–è¾“å…¥è¾“å‡º
    ios::sync_with_stdio(false);
    cin.tie(0);

    int n;
    cin >> n;

    vector<Point> points(n);
    for (int i = 0; i < n; ++i)
    {
        cin >> points[i].x >> points[i].y;
    }

    // min_dist[i] è¡¨ç¤ºç‚¹ i åˆ°å½“å‰ç”Ÿæˆæ ‘é›†åˆçš„æœ€çŸ­è·ç¦»
    // åˆå§‹åŒ–ä¸ºæ— ç©·å¤§
    vector<double> min_dist(n, 1e18);
    // visited[i] æ ‡è®°ç‚¹ i æ˜¯å¦å·²ç»åŠ å…¥äº†ç”Ÿæˆæ ‘
    vector<bool> visited(n, false);

    double total_weight = 0.0;

    // ä»ç¬¬0ä¸ªç‚¹å¼€å§‹æ„å»ºï¼Œè·ç¦»ä¸º0
    min_dist[0] = 0;

    // Prim ç®—æ³•ä¸»å¾ªç¯ï¼šæˆ‘ä»¬éœ€è¦åŠ å…¥ n ä¸ªç‚¹
    for (int i = 0; i < n; ++i)
    {
        int u = -1;

        // 1. å¯»æ‰¾ï¼šåœ¨æœªè®¿é—®çš„ç‚¹ä¸­ï¼Œæ‰¾åˆ°è·ç¦»ç”Ÿæˆæ ‘æœ€è¿‘çš„ç‚¹ u
        // è¿™ä¸€æ­¥æ˜¯ O(N) çš„
        for (int j = 0; j < n; ++j)
        {
            if (!visited[j])
            {
                if (u == -1 || min_dist[j] < min_dist[u])
                {
                    u = j;
                }
            }
        }

        // å¦‚æœæ‰¾ä¸åˆ°ç‚¹ï¼ˆå›¾ä¸è¿é€šï¼‰ï¼Œè·³å‡ºï¼ˆæœ¬é¢˜ä¿è¯è¿é€šï¼Œè¿™æ­¥å…¶å®æ˜¯é˜²å¾¡æ€§ç¼–ç¨‹ï¼‰
        if (u == -1)
            break;

        // 2. æ ‡è®°ï¼šå°† u åŠ å…¥ç”Ÿæˆæ ‘ï¼Œç´¯åŠ æƒé‡
        visited[u] = true;
        total_weight += min_dist[u];

        // 3. æ›´æ–°ï¼šç”¨æ–°åŠ å…¥çš„ç‚¹ u å»æ›´æ–°å…¶ä»–æœªè®¿é—®ç‚¹ v çš„è·ç¦»
        // è¿™ä¸€æ­¥ä¹Ÿæ˜¯ O(N) çš„
        for (int v = 0; v < n; ++v)
        {
            if (!visited[v])
            {
                double d = get_dist(points[u], points[v]);
                // å¦‚æœé€šè¿‡ u åˆ° v çš„è·ç¦»æ¯” v åŸæœ‰çš„è®°å½•æ›´çŸ­ï¼Œåˆ™æ›´æ–°
                if (d < min_dist[v])
                {
                    min_dist[v] = d;
                }
            }
        }
    }

    // æ ¼å¼åŒ–è¾“å‡ºï¼Œä¿ç•™ä¸¤ä½å°æ•°
    cout << fixed << setprecision(2) << total_weight << endl;

    return 0;
}
```

æ²¡é—®é¢˜ï¼ä¸ºäº†è®©ä½ å½»åº•ææ‡‚ä¸ºä»€ä¹ˆâ€œå‡ ä½•é¢˜â€è¦ç”¨æ•°ç»„ç‰ˆï¼Œè€Œâ€œå…¬è·¯é¢˜â€è¦ç”¨å †ä¼˜åŒ–ç‰ˆï¼Œæˆ‘ä»¬æ¥ä¸€åœº**ç¡¬æ ¸çš„æ•°æ®ç»“æ„å¤§æ¨ªè¯„**ã€‚

------

### 0. æ ¸å¿ƒç¬¦å·å®šä¹‰

åœ¨ç®—æ³•ç«èµ›å’Œå›¾è®ºä¸­ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦å†³å®šäº†ä¸€åˆ‡ï¼š

- **$N$ (Nodes)**ï¼šç‚¹çš„ä¸ªæ•°ã€‚
  - ä¾‹å¦‚ï¼šä½ è¿™é“é¢˜é‡Œ $N = 5000$ã€‚
- **$M$ (Edges)**ï¼šè¾¹çš„æ¡æ•°ã€‚
  - **ç¨ å¯†å›¾ (Dense Graph)**ï¼šè¾¹éå¸¸å¤šï¼Œæ¥è¿‘ $N^2$ã€‚ä¾‹å¦‚å‡ ä½•å…¨è¿æ¥å›¾ï¼Œ$M \approx \frac{N^2}{2}$ã€‚
  - **ç¨€ç–å›¾ (Sparse Graph)**ï¼šè¾¹å¾ˆå°‘ï¼Œæ¥è¿‘ $N$ã€‚ä¾‹å¦‚åœ°å›¾ä¸Šçš„å…¬è·¯ï¼Œ$M \approx 2N$ æˆ– $3N$ã€‚

------

### 1. å¤æ‚åº¦å¤§æ¨ªè¯„ (Big-O Comparison)

æˆ‘ä»¬å°†å¯¹æ¯”ä¸‰ç§ä¸»æµå†™æ³•ã€‚

| **ç®—æ³•ç‰ˆæœ¬**      | **æ ¸å¿ƒæ•°æ®ç»“æ„**            | **æ—¶é—´å¤æ‚åº¦**    | **ç©ºé—´å¤æ‚åº¦** | **é€‚ç”¨åœºæ™¯**        |
| ----------------- | --------------------------- | ----------------- | -------------- | ------------------- |
| **Prim (æœ´ç´ ç‰ˆ)** | æ•°ç»„ (`vector`)             | **$O(N^2)$**      | $O(N)$         | **ç¨ å¯†å›¾** (å‡ ä½•é¢˜) |
| **Prim (å †ä¼˜åŒ–)** | ä¼˜å…ˆé˜Ÿåˆ— (`priority_queue`) | **$O(M \log N)$** | $O(N+M)$       | **ç¨€ç–å›¾** (è·¯ç½‘é¢˜) |
| **Kruskal**       | å¹¶æŸ¥é›† + æ’åº               | **$O(M \log M)$** | $O(M)$         | **ç¨€ç–å›¾** (è·¯ç½‘é¢˜) |

------

### 2. æ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆå‡ ä½•é¢˜é‡Œ $O(N^2)$ åŠæ‰“å…¶ä»–ï¼Ÿ

è®©æˆ‘ä»¬ä»£å…¥ä½ é¢˜ç›®ä¸­çš„æ•°æ®ï¼š$N = 5000$ã€‚

ç”±äºæ˜¯å‡ ä½•å¹³é¢ï¼Œä»»æ„ä¸¤ç‚¹å¯è¿ï¼Œæ‰€ä»¥è¾¹æ•° $M \approx 12,500,000$ (1.25åƒä¸‡)ã€‚

#### é€‰æ‰‹ 1ï¼šPrim (æœ´ç´ æ•°ç»„ç‰ˆ)

- **åŸç†**ï¼šåŒé‡å¾ªç¯ï¼Œå¤–å±‚ $N$ æ¬¡ï¼Œå†…å±‚æ‰«æ $N$ æ¬¡ã€‚
- **è®¡ç®—**ï¼š$5000 \times 5000 = 25,000,000$ã€‚
- **è¿ç®—é‡**ï¼š**2.5 äº¿æ¬¡æŒ‡ä»¤**ï¼ˆç°ä»£ CPU 1ç§’å¤§æ¦‚è·‘ 1~5 äº¿æ¬¡ï¼Œ**ç¨³è¿‡**ï¼‰ã€‚
- **ç‰¹ç‚¹**ï¼šå®ƒæ ¹æœ¬ä¸åœ¨ä¹ä½ æœ‰å¤šå°‘æ¡è¾¹ï¼Œå®ƒåªåœ¨ä¹ç‚¹ã€‚

#### é€‰æ‰‹ 2ï¼šPrim (å †ä¼˜åŒ–ç‰ˆ)

- **åŸç†**ï¼šæ¯ä¸€æ¡è¾¹éƒ½å¯èƒ½è¢«æ‰”è¿›å †é‡Œï¼Œå †çš„æ’å…¥/å¼¹å‡ºæˆæœ¬æ˜¯ $\log(\text{å †å¤§å°})$ã€‚
- **è®¡ç®—**ï¼š$M \times \log_2 N \approx 12,500,000 \times 13$ã€‚
  - $\log_2 5000 \approx 13$ã€‚
- **è¿ç®—é‡**ï¼š**1.6 äº¿æ¬¡è¿ç®—**ã€‚
- **éšæ‚£**ï¼š
  1. è™½ç„¶ç†è®ºä¸Š 1.6äº¿ å’Œ 2.5äº¿ å·®ä¸å¤šï¼Œä½†**å †æ“ä½œçš„å¸¸æ•°å¾ˆå¤§**ï¼ˆæŒ‡é’ˆæ“ä½œã€å†…å­˜è·³è·ƒï¼‰ï¼Œå®é™…è¿è¡Œé€Ÿåº¦é€šå¸¸æ¯”ç®€å•çš„æ•°ç»„æ‰«ææ…¢ 3-5 å€ã€‚
  2. **ç©ºé—´çˆ†ç‚¸**ï¼šå †é‡Œæœ€å¤šå¯èƒ½å­˜ $M$ ä¸ªå…ƒç´ ï¼Œä½ éœ€è¦å­˜ 1200 ä¸‡ä¸ªç»“æ„ä½“ï¼Œè¿™å¾ˆå®¹æ˜“ **MLE (çˆ†å†…å­˜)**ã€‚

#### é€‰æ‰‹ 3ï¼šKruskal (è¾¹æ’åº)

- **åŸç†**ï¼šå…ˆæŠŠæ‰€æœ‰è¾¹æ’åºã€‚
- **è®¡ç®—**ï¼š$M \log M \approx 12,500,000 \times 24$ã€‚
  - $\log_2 12,500,000 \approx 24$ã€‚
- **è¿ç®—é‡**ï¼š**3 äº¿æ¬¡è¿ç®—**ã€‚
- **æ­»ç©´**ï¼šä½ éœ€è¦å…ˆç”Ÿæˆè¿™ 1250 ä¸‡æ¡è¾¹å¹¶å­˜ä¸‹æ¥ï¼Œå…‰æ˜¯ç”Ÿæˆè¿‡ç¨‹å°±è¶…æ—¶äº†ã€‚

------

### 3. æ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆâ€œæ‘æ‘é€šâ€è¦ç”¨å †ä¼˜åŒ–ï¼Ÿ

å‡è®¾é¢˜ç›®å˜äº†ï¼š**$N = 100,000$ (10ä¸‡ä¸ªæ‘åº„)**ï¼Œä½†æ¯ä¸ªæ‘åº„åªä¿®äº† 2 æ¡è·¯ï¼Œ**$M = 200,000$ (20ä¸‡æ¡è·¯)**ã€‚

#### é€‰æ‰‹ 1ï¼šPrim (æœ´ç´ æ•°ç»„ç‰ˆ)

- **è®¡ç®—**ï¼š$N^2 = 100,000^2 = 10,000,000,000$ã€‚
- **è¿ç®—é‡**ï¼š**100 äº¿æ¬¡**ã€‚
- **ç»“æœ**ï¼š**å¿…æ­»æ— ç–‘ (TLE)**ï¼Œè·‘å®Œè¦å‡ åˆ†é’Ÿã€‚

#### é€‰æ‰‹ 2ï¼šPrim (å †ä¼˜åŒ–ç‰ˆ)

- **è®¡ç®—**ï¼š$M \log N = 200,000 \times 17$ã€‚
  - $\log_2 100,000 \approx 17$ã€‚
- **è¿ç®—é‡**ï¼š**340 ä¸‡æ¬¡**ã€‚
- **ç»“æœ**ï¼š**ç§’æ€**ï¼ˆ0.01ç§’å‡ºç»“æœï¼‰ã€‚

------

### æ€»ç»“å›¾è°±

ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œè¯·çœ‹è¿™å¼ â€œé€‰å‹æŒ‡å—â€ï¼š

| **é¢˜ç›®ç»™çš„æ•°æ®**          | **å›¾çš„ç±»å‹**        | **è¾¹çš„æ•°é‡çº§**  | **ç‹è€…ç®—æ³•**      | **ä»£ç ç‰¹å¾**     |
| ------------------------- | ------------------- | --------------- | ----------------- | ---------------- |
| **ç»™ä½  N ä¸ªåæ ‡**         | **ç¨ å¯†å›¾** (Dense)  | $M \approx N^2$ | **Prim (æ•°ç»„)**   | åŒé‡ `for` å¾ªç¯  |
| **ç»™ä½  M æ¡è¾¹ (u, v, w)** | **ç¨€ç–å›¾** (Sparse) | $M \ll N^2$     | **Prim (å †ä¼˜åŒ–)** | `priority_queue` |
| **ç»™ä½  M æ¡è¾¹ (u, v, w)** | **ç¨€ç–å›¾** (Sparse) | $M \ll N^2$     | **Kruskal**       | `sort` + å¹¶æŸ¥é›†  |

**ä¸€å¥è¯å£è¯€ï¼š**

> **åæ ‡å»ºå›¾ç”¨æ•°ç»„ï¼Œç»™å®šè¿è¾¹ç”¨å †æ’ã€‚**